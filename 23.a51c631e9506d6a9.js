"use strict";(self.webpackChunkng=self.webpackChunkng||[]).push([[23],{2023:($,p,o)=>{o.r(p),o.d(p,{AssetProvidingModule:()=>j});var d=o(2252),t=o(5e3);let h=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-asset-model"]],decls:1,vars:0,template:function(e,s){1&e&&t._UZ(0,"router-outlet")},directives:[d.lC],encapsulation:2}),i})();var l=o(9713),A=o(7830),m=o(3490),f=o(520),v=o(8248),Z=o(1038),g=o(9808),T=o(4841),_=o(8315),b=o(9679),u=o(18);const P=["confirmAssignModal"];function x(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"a",33),t.NdJ("click",function(){return t.CHM(e),t.oxw().assignGroupAsset()}),t._UZ(1,"i",34),t._uU(2," Assign Assets"),t.qZA()}}function y(i,n){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().index,s=t.oxw(2);t.xp6(1),t.hij(" ",s.partitionsDates[e].name," ")}}function C(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,y,2,1,"span",47),t.qZA()),2&i){const e=n.$implicit,s=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",null!==s.assignedAsset&&s.assignedAsset.partitionId===e.id)}}function k(i,n){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.assetModel.assetModelType)}}function M(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tr",35),t.TgZ(1,"td",36),t.TgZ(2,"div",37),t.TgZ(3,"input",38),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().addRemoveAsset(r.id)}),t.qZA(),t._UZ(4,"label",39),t.qZA(),t.qZA(),t.TgZ(5,"td",40),t._uU(6),t.qZA(),t.TgZ(7,"td",40),t._uU(8),t.qZA(),t.TgZ(9,"td",40),t._uU(10),t.qZA(),t.TgZ(11,"td",40),t.YNc(12,C,2,1,"div",41),t.qZA(),t.YNc(13,k,2,1,"td",42),t.TgZ(14,"td",43),t.TgZ(15,"span",44),t._uU(16),t.qZA(),t.qZA(),t.TgZ(17,"td",45),t.TgZ(18,"button",46),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().showAssignModal(r.id)}),t._UZ(19,"i",34),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=n.$implicit,s=t.oxw();t.xp6(3),t.s9C("id",e.id),t.Q6J("checked",s.checkCheckedAsset(e.id)),t.xp6(1),t.s9C("for",e.id),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.dsc),t.xp6(2),t.Oqu(e.uid),t.xp6(2),t.Q6J("ngForOf",s.partitionsDates),t.xp6(1),t.Q6J("ngIf",e.assetModel),t.xp6(2),t.ekj("badge-danger","IN_PRODUCTION"===e.assetStatus)("badge-success","IN_INVENTORY"===e.assetStatus),t.xp6(1),t.hij(" ",e.assetStatus," "),t.xp6(2),t.Q6J("disabled",null!==e.assignedAsset&&null!==e.assignedAsset.partitionId||"IN_PRODUCTION"===e.assetStatus)}}function q(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tr",48),t.TgZ(1,"td",40),t._uU(2),t.qZA(),t.TgZ(3,"td",45),t.TgZ(4,"button",49),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().assignAsset(r.id)}),t._UZ(5,"i",34),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=n.$implicit;t.xp6(2),t.Oqu(e.name)}}const S=function(){return{key:"all",name:"Select",width:"38px",sortable:!1,checkAll:!0}},D=function(){return{key:"name",name:"Name",sortable:!0,minWidth:"80px",searchKey:"name",searchInput:!0}},I=function(){return{key:"dsc",name:"Description",searchKey:"dsc",sortable:!0,minWidth:"115px",searchInput:!0}},U=function(){return{key:"uid",name:"UID",searchKey:"uid",sortable:!0,minWidth:"65px",searchInput:!0}},N=function(i){return{key:"assignedAsset.partitionId",name:"Assigned to Partition",sortable:!0,searchKey:"partitionId",type:"select",selectData:i,minWidth:"180px",searchInput:!0}},R=function(i){return{key:"assetModel.assetModelType",name:"Gateway/Sensor",sortable:!0,searchKey:"assetModelType",minWidth:"150px",searchInput:!0,type:"select",selectData:i}},L=function(i){return{key:"assetStatus",name:"Status",sortable:!1,searchKey:"assetStatus",minWidth:"80px",searchInput:!1,type:"select",selectData:i}},O=function(){return{key:"action",name:"Action",width:"38px",sortable:!1}},w=function(i,n,e,s,a,r,c,K){return[i,n,e,s,a,r,c,K]},F=[{path:"",redirectTo:"list"},{path:"",component:h,children:[{path:"list",component:(()=>{class i{constructor(e,s,a){this.http=e,this.alertMessageService=s,this.paginateService=a,this.statusDates=[],this.assetTypes=[],this.assignToPartAsset=[],this.groupEdit=!1,this.checkAllCheckedStatus$=!1,this.partitionsDates=[],this.searchData={},this.paginateService.sessionPrefix="ASSET_PROVIDING_LIST"}get getPaginateService(){return this.paginateService}ngOnInit(){this.paginateService.restartPaginate(),this.http.get(l.A.httpUrl.resource_server+"/asset/asset-status").subscribe(e=>{this.statusDates.push({id:null,name:"All"});for(let s=0;s<e.length;s++)this.statusDates.push({id:e[s],name:e[s]})},e=>{404===e.status&&this.alertMessageService.addDangerMessage(e.error.message)}),this.http.get(l.A.httpUrl.resource_server+"/asset-model/asset-model-type").subscribe(e=>{this.assetTypes.push({id:null,name:"All"});for(let s=0;s<e.length;s++)this.assetTypes.push({id:e[s],name:e[s]})},e=>{404===e.status&&this.alertMessageService.addDangerMessage(e.error.message)}),this.http.get(m.V.httpUrl.resource_server+"/partition/get-by-resource?resourceName=Aya").subscribe(e=>{this.partitionsDates.push({id:null,name:"All"},{id:-1,name:"Not Assigned"});for(let s=0;s<e.length;s++)this.partitionsDates.push({id:e[s].id,name:e[s].name})},e=>{404===e.status&&this.alertMessageService.addDangerMessage(e.error.message)}),this.subscription=this.paginateService.getResult.subscribe(e=>this.getResult(e))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}showAssignModal(e){this.assignAssets=e,this.confirmAssignModal.show()}assignGroupAsset(){this.groupEdit=!0,this.confirmAssignModal.show()}checkAll(e){this.checkAllCheckedStatus$=e;const s=this.getPaginateService.paginateResult[this.getPaginateService.page];for(const a in s)s.hasOwnProperty(a)&&(this.checkCheckedAsset(s[a].id)&&!e&&this.addRemoveAsset(s[a].id),!this.checkCheckedAsset(s[a].id)&&e&&this.addRemoveAsset(s[a].id))}addRemoveAsset(e){let s=!0;for(let a=0;a<this.assignToPartAsset.length;a++)if(this.assignToPartAsset[a].id===e){s=!1,this.assignToPartAsset.splice(a,1);break}s&&this.assignToPartAsset.push({id:e})}checkCheckedAsset(e){for(let s=0;s<this.assignToPartAsset.length;s++)if(this.assignToPartAsset[s].id===e)return!0}assignAsset(e){const s={assetIdList:[this.assignAssets],partitionId:e};if(this.groupEdit){s.assetIdList=[];for(let a=0;a<this.assignToPartAsset.length;a++)s.assetIdList.push(this.assignToPartAsset[a].id)}this.http.put(l.A.httpUrl.resource_server+"/assigned-asset",s).subscribe(()=>{this.alertMessageService.addSuccessMessage("Asset successfully assigned"),this.confirmAssignModal.hide(),this.assignToPartAsset=[],this.checkAllCheckedStatus$=!1,this.paginateService.paginateResult=[],this.getResult()},a=>{this.alertMessageService.addDangerMessage(a.error.message)})}refreshAll(){this.paginateService.setEmptyPaginateResult(),this.getResult()}getResult(e){if(this.paginateService.checkPageEmpty()){(0,A.K)(e)&&(this.searchData=e);const s="?"+this.paginateService.getRequestParamsFromObject(this.searchData)+"&assetStatus=IN_INVENTORY";this.http.get(l.A.httpUrl.resource_server+"/asset/search-for-assigning"+s).subscribe(a=>{this.paginateService.allRecordCount=a.totalElements,this.paginateService.calculatePaginate(a.content)},a=>{404===a.status&&this.alertMessageService.addDangerMessage(a.error.message)})}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.eN),t.Y36(v.O),t.Y36(Z.r))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-list-asset-providing"]],viewQuery:function(e,s){if(1&e&&t.Gf(P,7),2&e){let a;t.iGM(a=t.CRH())&&(s.confirmAssignModal=a.first)}},decls:48,vars:25,consts:[["id","ui-view"],[1,"animated","fadeIn"],[1,"card"],[1,"card-header"],[1,"fa","fa-edit"],[1,"float-right","m-0"],["title","Assign Assets","href","javascript:void(0)","class","mx-3 px-4 py-1 btn-success text-white",3,"click",4,"ngIf"],["href","javascript:void(0)","title","refresh",1,"ml-4",3,"click"],["aria-hidden","true",1,"fa","fa-refresh"],[1,"card-body"],["id","DataTables_Table_0_wrapper",1,"dataTables_wrapper","dt-bootstrap4","no-footer"],[1,"row"],[1,"col-sm-12","col-md-6"],[1,"col-sm-12","table-parent"],[3,"headerParams","checkAllCheckedStatus","checkAll"],["class","odd",4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["confirmAssignModal","bs-modal"],["role","document",1,"modal-dialog","modal-info"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-12"],["id","DataTables_Table_0","role","grid","aria-describedby","DataTables_Table_0_info",1,"table","table-striped","table-bordered","datatable","dataTable","no-footer",2,"border-collapse","collapse !important"],["role","row"],["tabindex","0","aria-controls","DataTables_Table_0","rowspan","1","colspan","1","aria-label","Date registered: activate to sort column ascending","aria-sort","descending",1,"sorting_desc",2,"width","331px","text-align","center"],["tabindex","0","aria-controls","DataTables_Table_0","rowspan","1","colspan","2","aria-label","Date registered: activate to sort column ascending","aria-sort","descending",1,"sorting_desc",2,"width","331px","text-align","center"],["role","row","class","odd1",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["title","Assign Assets","href","javascript:void(0)",1,"mx-3","px-4","py-1","btn-success","text-white",3,"click"],[1,"cui-arrow-right"],[1,"odd"],[1,"pl-3"],[1,"text-center","custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",2,"cursor","pointer",3,"id","checked","click"],[1,"custom-control-label",3,"for"],[1,""],[4,"ngFor","ngForOf"],["class","",4,"ngIf"],[1,"text-center"],[1,"badge"],[1,"edit"],["title","Assign",1,"btn","ml-3","btn-success",3,"disabled","click"],[4,"ngIf"],["role","row",1,"odd1"],["title","Assign",1,"btn","ml-3","btn-success",3,"click"]],template:function(e,s){if(1&e){const a=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div"),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t._UZ(5,"i",4),t._uU(6," Asset Providing "),t.TgZ(7,"p",5),t.YNc(8,x,3,0,"a",6),t.TgZ(9,"a",7),t.NdJ("click",function(){return s.refreshAll()}),t._UZ(10,"i",8),t._uU(11," Reload "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",9),t.TgZ(13,"div",10),t.TgZ(14,"div",11),t._UZ(15,"app-paginate-show-count",12),t.qZA(),t.TgZ(16,"div",11),t.TgZ(17,"div",13),t.TgZ(18,"app-sortable-table-header",14),t.NdJ("checkAll",function(c){return s.checkAll(c)}),t.TgZ(19,"tbody"),t.YNc(20,M,20,14,"tr",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(21,"app-paginate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",16,17),t.TgZ(24,"div",18),t.TgZ(25,"div",19),t.TgZ(26,"div",20),t.TgZ(27,"h4",21),t._uU(28,"For assigning please select the partition"),t.qZA(),t.TgZ(29,"button",22),t.NdJ("click",function(){return t.CHM(a),t.MAs(23).hide(),s.groupEdit=!1}),t.TgZ(30,"span",23),t._uU(31,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",24),t.TgZ(33,"div",9),t.TgZ(34,"div",11),t.TgZ(35,"div",25),t.TgZ(36,"table",26),t.TgZ(37,"thead"),t.TgZ(38,"tr",27),t.TgZ(39,"th",28),t._uU(40,"Partition "),t.qZA(),t.TgZ(41,"th",29),t._uU(42,"Action "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"tbody"),t.YNc(44,q,6,1,"tr",30),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"div",31),t.TgZ(46,"button",32),t.NdJ("click",function(){return t.CHM(a),t.MAs(23).hide(),s.groupEdit=!1}),t._uU(47,"Cancel "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.xp6(8),t.Q6J("ngIf",s.assignToPartAsset.length>1),t.xp6(10),t.Q6J("headerParams",t.qlk(16,w,t.DdM(5,S),t.DdM(6,D),t.DdM(7,I),t.DdM(8,U),t.VKq(9,N,s.partitionsDates),t.VKq(11,R,s.assetTypes),t.VKq(13,L,s.statusDates),t.DdM(15,O)))("checkAllCheckedStatus",s.checkAllCheckedStatus$),t.xp6(2),t.Q6J("ngForOf",s.getPaginateService.paginateResult[s.getPaginateService.page]),t.xp6(24),t.Q6J("ngForOf",s.partitionsDates.slice(2,s.partitionsDates.length)))},directives:[g.O5,T.S,_.X,g.sg,b.c,u.oB],styles:[""]}),i})(),data:{title:"Asset Providing",browserTitle:"Asset Providing List"}}]}];let J=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.Bz.forChild(F)],d.Bz]}),i})();var E=o(3150),Q=o(4466),Y=o(6217);let j=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.ez,J,Q.m,Y.n,E.Ob,u.zk.forRoot()]]}),i})()}}]);