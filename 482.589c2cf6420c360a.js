"use strict";(self.webpackChunkng=self.webpackChunkng||[]).push([[482],{6482:(Z,P,e)=>{e.r(P),e.d(P,{PartitionModule:()=>B});var m=e(9808),f=e(2252),M=e(2436),c=e(6938),t=e(5e3);let R=(()=>{class n{constructor(){}static deletePermissionDenyMenuItem(o){const r=[];for(let s=0;s<o.length;s++)if(c.e.checkExistsRoles(o[s].permission))if(o[s].hasOwnProperty("children")){let u=null;for(let p=0;p<o[s].children.length;p++)null===u&&(u=r.push({name:o[s].name,url:o[s].url?o[s].url:" ",icon:o[s].icon,children:[]})-1),o[s].children[p].permission&&c.e.checkExistsRoles(o[s].children[p].permission)&&r[u].children.push(o[s].children[p])}else r.push(o[s]);return r}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var g=e(3490);const A=[{name:"Partitions",url:"/partition/partitions",icon:"fa fa-list",permission:[8]},{name:"Partition",url:"/partition/partitions/info",icon:"icon-map",permission:[5],flag:"partition"},{name:"System User",url:"/partition/admins",icon:"cui-user",permission:[8]},{name:"System User",url:"/partition/admins",icon:"cui-people",permission:[5]},{name:"Resources",url:"/partition/resource",icon:"fa fa-cubes",permission:[8]},{name:"Assigned Resources",icon:"fa fa-hand-o-right",url:"no-url",permission:[5,6,7,8],flag:"resource"},{name:"Resource Types",url:"/partition/resource-types",icon:"fa fa-list-alt",permission:[8]}];var l=e(520),i=e(7787),d=e(1734),a=e(3077),v=e(7809),I=e(7029);function N(n,h){if(1&n){const o=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"div",16),t.TgZ(2,"strong"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"a",17),t.NdJ("click",function(){return t.CHM(o),t.oxw().logout()}),t._UZ(5,"i",18),t._uU(6," Logout"),t.qZA(),t.qZA()}if(2&n){const o=t.oxw();t.xp6(3),t.AsE("",o.name," ",o.surname,"")}}const S=function(){return{src:"assets/img/brand/logo.png",height:25,alt:"Wallet Admin Logo"}},D=function(){return{src:"assets/img/brand/logo.png",width:30,alt:"Wallet Admin Logo"}};let y=(()=>{class n{constructor(o,r,s){this.authService=o,this.router=r,this.http=s,this.sidebarMinimized=!0,this.element=document.body,this.surname="",this.name="",this.generatedNavItems=[],this.counter=0,this.changes=new MutationObserver(()=>{this.sidebarMinimized=document.body.classList.contains("sidebar-minimized")}),this.changes.observe(this.element,{attributes:!0}),this.addItemInMenu()}logout(){this.authService.logout()}ngOnInit(){this.currentYear=new Date,this.surname=c.e.getSurname(),this.name=c.e.getName()}ngOnDestroy(){}createFinalNav(o=0){this.counter=this.counter+o,this.counter<1&&(this.generatedNavItems=this.curr)}addItemInMenu(){const o=JSON.parse(JSON.stringify(A));this.curr=R.deletePermissionDenyMenuItem(o);for(let r=0;r<this.curr.length;r++)this.curr[r].flag&&("resource"===this.curr[r].flag?this.addResourceIn(r):"partition"===this.curr[r].flag?this.addPartitionIn(r):console.error('Please add method for "'+this.curr[r].flag+'" flag'));this.createFinalNav()}addResourceIn(o){const r=u=>{u.map(p=>{c.e.getPartitionId()===p.partition.id&&this.curr[o].children.push({name:p.name,url:p.resourceType.settingUrl,icon:"icon-globe"})}),this.createFinalNav(-1)};++this.counter,this.curr[o].children=[];const s=JSON.parse(localStorage.getItem("NAV_PARTITION_RESOURCE"));s?r(s):this.http.get(g.V.httpUrl.resource_server+"/resource").subscribe(u=>{localStorage.setItem("NAV_PARTITION_RESOURCE",JSON.stringify(u.content)),console.log(u.content,"ResourceInterface"),r(u.content)},()=>{this.createFinalNav(-1)})}addPartitionIn(o){const r=u=>{u.name&&(this.curr[o].name=u.name),this.createFinalNav(-1)};++this.counter;const s=JSON.parse(localStorage.getItem("NAV_PARTITION_PARTITION"));s?r(s):this.http.get(g.V.httpUrl.resource_server+"/partition").subscribe(u=>{localStorage.setItem("NAV_PARTITION_PARTITION",JSON.stringify(u)),r(u)},()=>{this.createFinalNav(-1)})}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(c.e),t.Y36(f.F0),t.Y36(l.eN))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard"]],decls:24,vars:15,consts:[[3,"fixed","navbarBrandFull","navbarBrandMinimized","sidebarToggler","asideMenuToggler","mobileAsideMenuToggler"],[1,"nav","navbar-nav","ml-auto"],["dropdown","","placement","bottom right",1,"nav-item","dropdown"],["data-toggle","dropdown","href","#","role","button","aria-haspopup","true","aria-expanded","false","dropdownToggle","",1,"nav-link",3,"click"],["alt","admin@bootstrapmaster.com",1,"img-avatar",3,"src"],["class","dropdown-menu dropdown-menu-right","aria-labelledby","simple-dropdown",4,"dropdownMenu"],[1,"app-body"],[3,"fixed","display"],[3,"navItems","perfectScrollbar","disabled"],[1,"main"],["main",""],[3,"main_class"],[1,"breadcrumb"],[1,"container-fluid"],["target","_blank","href","https://www.connectto.com"],["aria-labelledby","simple-dropdown",1,"dropdown-menu","dropdown-menu-right"],[1,"dropdown-header","text-center"],[1,"dropdown-item","logout-button",3,"click"],[1,"fa","fa-lock"]],template:function(o,r){if(1&o&&(t.TgZ(0,"app-header",0),t.TgZ(1,"ul",1),t._UZ(2,"app-socket-message"),t.TgZ(3,"li",2),t.TgZ(4,"a",3),t.NdJ("click",function(){return!1}),t._UZ(5,"img",4),t.qZA(),t.YNc(6,N,7,2,"div",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"app-sidebar",7),t._UZ(9,"app-sidebar-nav",8),t._UZ(10,"app-sidebar-minimizer"),t.qZA(),t.TgZ(11,"main",9,10),t._UZ(13,"app-loader",11),t.TgZ(14,"ol",12),t._UZ(15,"app-breadcrumb"),t.qZA(),t.TgZ(16,"div",13),t._UZ(17,"router-outlet"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"app-footer"),t.TgZ(19,"span"),t._uU(20,"Powered by "),t.TgZ(21,"a",14),t._uU(22,"ConnectTo Communications"),t.qZA(),t._uU(23),t.qZA(),t.qZA()),2&o){const s=t.MAs(12);t.Q6J("fixed",!0)("navbarBrandFull",t.DdM(13,S))("navbarBrandMinimized",t.DdM(14,D))("sidebarToggler","lg")("asideMenuToggler",!1)("mobileAsideMenuToggler",!1),t.xp6(5),t.Q6J("src","assets/img/avatars/user.png",t.LSH),t.xp6(3),t.Q6J("fixed",!0)("display","lg"),t.xp6(1),t.Q6J("navItems",r.generatedNavItems)("disabled",r.sidebarMinimized),t.xp6(4),t.Q6J("main_class",s),t.xp6(10),t.hij(" \xa9 ",r.currentYear.getFullYear(),"")}},directives:[i.Pj,d.n,a.TO,a.Mq,a.Hz,i.ys,i.zH,v.$V,i.hq,I.R,i.TZ,f.lC,i.qB],encapsulation:2}),n})();var T=e(4945);let O=(()=>{class n{constructor(o){this.router=o}ngOnInit(){c.e.getRoles()[5]?this.router.navigate(["/partition/partitions/info"]):!c.e.getRoles()[5]&&(c.e.getRoles()[11]||c.e.getRoles()[12]||c.e.getRoles()[13])?this.router.navigate(["/aya"]).then():c.e.getRoles()[6]||c.e.getRoles()[7]?this.router.navigate(["/partition/permission-denied"]):c.e.getRoles()[8]?this.router.navigate(["/partition/partitions"]):void 0===c.e.getRoles()[8]&&this.router.navigate(["/partition/404"])}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(f.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-for-redirect"]],decls:0,vars:0,template:function(o,r){},encapsulation:2}),n})();var C=e(5818);const E=[{path:"",redirectTo:"for-redirect",pathMatch:"full"},{path:"for-redirect",component:O},{path:"",component:y,children:[{path:"admins",loadChildren:()=>Promise.all([e.e(878),e.e(592),e.e(168)]).then(e.bind(e,7168)).then(n=>n.AdminsModule),canActivate:[T.P],data:{title:"System User",allowedRole:[5,8]}},{path:"partitions",loadChildren:()=>e.e(937).then(e.bind(e,9937)).then(n=>n.PartitionsModule),canActivate:[T.P],data:{title:"Partitions",allowedRole:[5,8]}},{path:"resource",loadChildren:()=>Promise.all([e.e(878),e.e(592),e.e(906)]).then(e.bind(e,9906)).then(n=>n.ResourceModule),canActivate:[T.P],data:{title:"Resource",allowedRole:[5,8]}},{path:"resource-types",loadChildren:()=>Promise.all([e.e(592),e.e(850)]).then(e.bind(e,2850)).then(n=>n.ResourceTypesModule),canActivate:[T.P],data:{title:"Resource Types",allowedRole:[5,8]}},{path:"404",component:M.g,data:{title:"404"}},{path:"permission-denied",component:C.S,data:{title:"Permission Denied"}},{path:"**",component:M.g,data:{title:"Page 404"}}]}];let U=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[f.Bz.forChild(E)],f.Bz]}),n})();var F=e(9079),L=e(4466),b=e(809),x=e(18),J=e(4829),z=e(6217);let B=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[b.T],imports:[[m.ez,x.zk.forRoot(),U,i.kI,i.so.forRoot(),i.JM,i.k3,i.el,v.Xd,a.mr.forRoot(),F.P4.forRoot(),J.m9,L.m,z.n]]}),n})()},809:(Z,P,e)=>{e.d(P,{T:()=>R});var m=e(5e3),f=e(520),M=e(8248),c=e(2252),t=e(6938);let R=(()=>{class g{constructor(l,i,d,a){this.http=l,this.alertMessage=i,this.router=d,this.authService=a}getData(l,i){this.http.get(l).subscribe(d=>{i(d)},d=>{401===d.status&&this.authService.reLogin(a=>{a&&this.getData(l,i)}),console.log(d,"getData getData getData"),this.handleError(d)})}putData(l,i,d){this.http.put(l,i).subscribe(a=>{d(a),this.alertMessage.addSuccessMessage(this.successMessage),this.router.navigate([this.navUrl])},a=>{401===a.status&&this.authService.reLogin(v=>{v&&this.putData(l,i,d)}),this.alertMessage.addDangerMessage(a.error.message),console.log(a,"putData error putData error putData error")})}patchData(l,i,d){this.http.patch(l,i).subscribe(a=>{d(a),this.alertMessage.addSuccessMessage(this.successMessage),this.router.navigate([this.navUrl])},a=>{401===a.status?this.authService.reLogin(v=>{v&&this.patchData(l,i,d)}):403===a.status&&this.alertMessage.addDangerMessage(a.error.error),this.alertMessage.addDangerMessage(a.error.message),console.log(a,"putData error putData error putData error")})}handleError(l){l.error instanceof ErrorEvent?console.error("An error occurred:",l.error.message):console.error(`Backend returned code ${l.status}, body was: ${l.error}`)}}return g.\u0275fac=function(l){return new(l||g)(m.LFG(f.eN),m.LFG(M.O),m.LFG(c.F0),m.LFG(t.e))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);