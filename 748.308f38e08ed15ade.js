"use strict";(self.webpackChunkng=self.webpackChunkng||[]).push([[748],{3748:(Be,A,c)=>{c.r(A),c.d(A,{GatewayProvidingModule:()=>Ve});var p=c(2252),e=c(5e3);let w=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-asset-model"]],decls:1,vars:0,template:function(t,a){1&t&&e._UZ(0,"router-outlet")},directives:[p.lC],encapsulation:2}),s})();var h=c(9713),m=c(7830),g=c(520),u=c(8248),T=c(1038),l=c(9808),b=c(4841),S=c(8315),Z=c(9679),f=c(18);const M=["dangerModal"];function k(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"a",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().detachAsset("")}),e._UZ(1,"i",30),e._uU(2," Detach Assets"),e.qZA()}}function P(s,n){if(1&s&&(e.TgZ(0,"span",43),e._uU(1),e.qZA()),2&s){const t=e.oxw(2).$implicit;e.xp6(1),e.hij("Longitude ",null==t.point?null:t.point.coordinates[1],"")}}function q(s,n){if(1&s&&(e.TgZ(0,"span",41),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.YNc(3,P,2,1,"span",42),e.qZA()),2&s){const t=e.oxw().$implicit;e.xp6(2),e.hij("Latitude ",null==t.point?null:t.point.coordinates[0],""),e.xp6(1),e.Q6J("ngIf",t.point)}}function I(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"tr",31),e.TgZ(1,"td",32),e.TgZ(2,"div",33),e.TgZ(3,"input",34),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().addRemoveAsset(o.id)}),e.qZA(),e._UZ(4,"label",35),e.qZA(),e.qZA(),e.TgZ(5,"td",36),e._uU(6),e.qZA(),e.TgZ(7,"td",36),e._uU(8),e.qZA(),e.TgZ(9,"td",37),e.YNc(10,q,4,2,"span",38),e.qZA(),e.TgZ(11,"td",39),e.TgZ(12,"button",40),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().detachAsset(o.id)}),e._UZ(13,"i",30),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=n.$implicit,a=e.oxw();e.xp6(3),e.s9C("id",t.name),e.Q6J("checked",a.checkCheckedAsset(t.id)),e.xp6(1),e.s9C("for",t.name),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.dsc),e.xp6(2),e.Q6J("ngIf",t.point)}}const N=function(){return{key:"all",name:"Select",width:"38px",sortable:!1,checkAll:!0}},R=function(){return{key:"name",name:"Name",sortable:!0,minWidth:"80px",searchKey:"name",searchInput:!0}},O=function(){return{key:"dsc",name:"Description",searchKey:"dsc",sortable:!0,minWidth:"80px",searchInput:!0}},H=function(){return{key:"point",name:"Coordinates",sortable:!1,searchKey:"point",width:"80px",searchInput:!1}},J=function(){return{key:"action",name:"Action",width:"38px",sortable:!1}},U=function(s,n,t,a,i){return[s,n,t,a,i]};let y=(()=>{class s{constructor(t,a,i){this.http=t,this.alertMessageService=a,this.paginateService=i,this.detachToGatewayAsset=[],this.checkAllCheckedStatus$=!1,this.refreshResult=new e.vpe,this.searchData={},this.paginateService.sessionPrefix="ATTACHED_ASSET_LIST"}get getPaginateService(){return this.paginateService}refreshAll(){this.paginateService.setEmptyPaginateResult(),this.getResult()}checkAll(t){this.checkAllCheckedStatus$=t;const a=this.getPaginateService.paginateResult[this.getPaginateService.page];for(const i in a)a.hasOwnProperty(i)&&(this.checkCheckedAsset(a[i].id)&&!t&&this.addRemoveAsset(a[i].id),!this.checkCheckedAsset(a[i].id)&&t&&this.addRemoveAsset(a[i].id))}detachAsset(t){this.dangerModal.show(),this.detachId=t}continue(){let t="The asset has been successfully detached";const a={assignedGatewayId:this.received.partitionId,assignedAssetIdList:[this.detachId]};""===this.detachId&&this.detachToGatewayAsset&&(a.assignedAssetIdList=this.detachToGatewayAsset,t="Assets are successfully detached"),this.http.post(h.A.httpUrl.resource_server+"/attached-asset/detach",a).subscribe(()=>{this.dangerModal.hide(),this.alertMessageService.addSuccessMessage(t),this.detachToGatewayAsset=[],this.refreshResult.emit(),this.checkAllCheckedStatus$=!1},i=>{this.alertMessageService.addDangerMessage(i.error.message)})}addRemoveAsset(t){let a=!0;for(let i=0;i<this.detachToGatewayAsset.length;i++)if(this.detachToGatewayAsset[i]===t){a=!1,this.detachToGatewayAsset.splice(i,1);break}a&&this.detachToGatewayAsset.push(t)}checkCheckedAsset(t){for(let a=0;a<this.detachToGatewayAsset.length;a++)if(this.detachToGatewayAsset[a]===t)return!0}ngOnInit(){this.paginateService.restartPaginate(),this.subscription=this.paginateService.getResult.subscribe(t=>this.getResult(t))}ngAfterViewInit(){}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}getResult(t){if(this.paginateService.checkPageEmpty()){(0,m.K)(t)&&(this.searchData=t);const a="?assignedGatewayId="+this.received.partitionId+"&"+this.paginateService.getRequestParamsFromObject(this.searchData);this.http.get(h.A.httpUrl.resource_server+"/assigned-asset/get-attached-assets-to-gateway"+a).subscribe(i=>{this.paginateService.allRecordCount=i.totalElements,this.paginateService.calculatePaginate(i.content)},i=>{404===i.status&&this.alertMessageService.addDangerMessage(i.error.message)})}}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(g.eN),e.Y36(u.O),e.Y36(T.r))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-attached-assets"]],viewQuery:function(t,a){if(1&t&&e.Gf(M,5),2&t){let i;e.iGM(i=e.CRH())&&(a.dangerModal=i.first)}},inputs:{received:"received"},outputs:{refreshResult:"refreshResult"},decls:43,vars:15,consts:[[1,"card-body"],[1,"col-12"],["id","ui-view"],[1,"animated","fadeIn"],[1,"card"],[1,"card-header"],[1,"fa","fa-edit"],[1,"float-right","m-0"],["title","Detach Assets","href","javascript:void(0)","class","mx-3 px-4 py-1 btn-danger text-white",3,"click",4,"ngIf"],["href","javascript:void(0)","title","refresh",1,"ml-4",3,"click"],["aria-hidden","true",1,"fa","fa-refresh"],["id","DataTables_Table_0_wrapper",1,"dataTables_wrapper","dt-bootstrap4","no-footer"],[1,"row"],[1,"col-sm-12","col-md-6"],[1,"col-sm-12","table-parent"],[3,"headerParams","checkAllCheckedStatus","checkAll"],["class","odd",4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["title","Detach Assets","href","javascript:void(0)",1,"mx-3","px-4","py-1","btn-danger","text-white",3,"click"],[1,"icon-trash"],[1,"odd"],[1,"pl-3"],[1,"text-center","custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",2,"cursor","pointer",3,"id","checked","click"],[1,"custom-control-label",3,"for"],[1,""],[1,"align-middle"],["class","ml-2 align-middle",4,"ngIf"],[1,"edit"],["title","Detach",1,"btn","ml-3","btn-danger",3,"click"],[1,"ml-2","align-middle"],["class","ml-3",4,"ngIf"],[1,"ml-3"]],template:function(t,a){if(1&t){const i=e.EpF();e._UZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",0),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e._UZ(7,"i",6),e._uU(8," Attached To Gateway Assets "),e.TgZ(9,"p",7),e.YNc(10,k,3,0,"a",8),e.TgZ(11,"a",9),e.NdJ("click",function(){return a.refreshAll()}),e._UZ(12,"i",10),e._uU(13," Reload "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",0),e.TgZ(15,"div",11),e.TgZ(16,"div",12),e._UZ(17,"app-paginate-show-count",13),e.qZA(),e.TgZ(18,"div",12),e.TgZ(19,"div",14),e.TgZ(20,"app-sortable-table-header",15),e.NdJ("checkAll",function(r){return a.checkAll(r)}),e.TgZ(21,"tbody"),e.YNc(22,I,14,6,"tr",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(23,"app-paginate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",17,18),e.TgZ(26,"div",19),e.TgZ(27,"div",20),e.TgZ(28,"div",21),e.TgZ(29,"h4",22),e._uU(30,"Warning"),e.qZA(),e.TgZ(31,"button",23),e.NdJ("click",function(){return e.CHM(i),e.MAs(25).hide()}),e.TgZ(32,"span",24),e._uU(33,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",25),e.TgZ(35,"p"),e.TgZ(36,"span"),e._uU(37,"Are you sure you want to detach?"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",26),e.TgZ(39,"button",27),e.NdJ("click",function(){return e.CHM(i),e.MAs(25).hide()}),e._uU(40,"Cancel "),e.qZA(),e.TgZ(41,"button",28),e.NdJ("click",function(){return a.continue()}),e._uU(42,"Continue anyway"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(10),e.Q6J("ngIf",a.detachToGatewayAsset.length>1),e.xp6(10),e.Q6J("headerParams",e.qbA(9,U,e.DdM(4,N),e.DdM(5,R),e.DdM(6,O),e.DdM(7,H),e.DdM(8,J)))("checkAllCheckedStatus",a.checkAllCheckedStatus$),e.xp6(2),e.Q6J("ngForOf",a.getPaginateService.paginateResult[a.getPaginateService.page]))},directives:[l.O5,b.S,S.X,l.sg,Z.c,f.oB],styles:[".my-drop-zone[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.my-drop-zone[_ngcontent-%COMP%]   .file_input_parent[_ngcontent-%COMP%]{overflow:hidden;position:relative;cursor:pointer}.my-drop-zone[_ngcontent-%COMP%]   .file_input_parent[_ngcontent-%COMP%]   .input_file[_ngcontent-%COMP%]{display:none}"]}),s})();var E=c(591);let _=(()=>{class s{constructor(){this.sessionPrefix="",this.selectedPageKey="SELECTED_PAGE",this.selectedShowCount="SELECTED_SHOW_COUNT",this.allRecordCount=0,this.paginateResult=[],this.page=0,this.showCount=10,this.searchVal="",this.sortType="desc",this.sortName="id",this.resultSource=new E.X({}),this.getResult=this.resultSource.asObservable(),this.showPaginationList=[],this.paginateMaxShowedCount=10,this.intervalCount=0,this.componentSortName=""}getRequestParams(){let t="page="+encodeURIComponent(this.page)+"&size="+encodeURIComponent(this.showCount);return this.searchVal&&(t+="&name="+encodeURIComponent(this.searchVal)),this.sortName&&(t+="&sort="+encodeURIComponent(this.sortName)+","+encodeURIComponent(this.sortType)),console.log(t,"getRequestParams()"),t}getRequestParamsFromObject(t){let a=this.getRequestParams();for(const i in t)t.hasOwnProperty(i)&&(console.log(t[i],"searchData[property]"),(t[i]||0===t[i])&&"null"!==t[i]&&(a+=`&${i}=${encodeURIComponent(t[i])}`));return a}restartPaginate(t=null){t?(this.componentSortName=t,this.sortName=t):(this.componentSortName="",this.sortName="id"),this.searchVal="",this.setEmptyPaginateResult(),this.getSelectedValuesFromSessionStorage()}setEmptyPaginateResult(){this.page=0,this.paginateResult=[]}checkPageEmpty(){return void 0===this.paginateResult[this.page]||0===this.paginateResult[this.page].length||(this.calculateBigPaginate(),!1)}calculatePaginate(t){const a=Math.ceil(this.allRecordCount/this.showCount);for(let i=0;i<a;i++)i===this.page?this.paginateResult[i]=t:this.paginateResult[i]||(this.paginateResult[i]=[]);this.calculateBigPaginate()}calculateBigPaginate(){let t;this.intervalCount=Math.ceil(this.paginateResult.length/this.paginateMaxShowedCount),this.bigPaginateIntervalNumber=Math.floor(this.page/this.paginateMaxShowedCount),this.showPaginationList=[],t=this.paginateResult.length-this.bigPaginateIntervalNumber*this.paginateMaxShowedCount<this.paginateMaxShowedCount?this.paginateResult.length-this.bigPaginateIntervalNumber*this.paginateMaxShowedCount:this.paginateMaxShowedCount,console.log(t,"showPageCount");for(let a=this.bigPaginateIntervalNumber*this.paginateMaxShowedCount;a<this.bigPaginateIntervalNumber*this.paginateMaxShowedCount+t;a++)this.showPaginationList.push(a);return console.log(this.showPaginationList),this.showPaginationList}paginateSetPageStorage(t){this.page=t,this.setSessionStorage(this.selectedPageKey,this.page.toString())}paginateSetShowCountInStorage(t){this.showCount=t,this.setSessionStorage(this.selectedShowCount,this.showCount.toString())}setSortTypeAndNameStorage(t){console.log(t),"desc"===this.sortType&&this.sortName===t?this.sortType="asc":"asc"===this.sortType&&this.sortName===t&&(this.sortType="desc"),this.sortName=t||(this.componentSortName?this.componentSortName:"id"),this.setSessionStorage("SORT_TYPE",this.sortType),this.setSessionStorage("SORT_NAME",this.sortName)}setSessionStorage(t,a){sessionStorage.setItem(this.sessionPrefix+"_"+t,a)}getSessionStorage(t){return sessionStorage.getItem(this.sessionPrefix+t)}getSelectedValuesFromSessionStorage(){const t=+this.getSessionStorage("_"+this.selectedShowCount);t&&(this.showCount=t);const a=this.getSessionStorage("_SEARCH_VALUE");console.log(a,"SVSV"),this.searchVal=a||"";const i=+this.getSessionStorage("_"+this.selectedPageKey);console.log(i,"SP"),this.page=i||0;const o=this.getSessionStorage("_SORT_TYPE");console.log(o,"ST"),o&&(this.sortType=o);const r=this.getSessionStorage("_SORT_NAME");console.log(r,"SN"),r&&(this.sortName=r)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var d=c(3075);let G=(()=>{class s{constructor(t){this.paginateService=t,this.showCountInput=new d.NI}changeShowCount(){this.paginateService.paginateSetPageStorage(0),this.paginateService.setEmptyPaginateResult(),this.paginateService.paginateSetShowCountInStorage(this.showCountInput.value),this.paginateService.resultSource.next(!0)}ngOnInit(){}ngAfterViewInit(){this.showCountInput.setValue(this.paginateService.showCount)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-paginate-show-count-module"]],decls:15,vars:1,consts:[["id","showSelect",1,"mdb-select","mdb-select-sm","form-control","form-control-sm","d-inline-block","w-auto",3,"formControl","change"],["value","5"],["value","10"],["value","25"],["value","50"],["value","100"]],template:function(t,a){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"label"),e._uU(2,"Show "),e.TgZ(3,"select",0),e.NdJ("change",function(){return a.changeShowCount()}),e.TgZ(4,"option",1),e._uU(5,"5"),e.qZA(),e.TgZ(6,"option",2),e._uU(7,"10"),e.qZA(),e.TgZ(8,"option",3),e._uU(9,"25"),e.qZA(),e.TgZ(10,"option",4),e._uU(11,"50"),e.qZA(),e.TgZ(12,"option",5),e._uU(13,"100"),e.qZA(),e.qZA(),e._uU(14," entries "),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("formControl",a.showCountInput))},directives:[d.EJ,d.JJ,d.oH,d.YN,d.Kr],styles:[""]}),s})();var D=c(8929),F=c(5064),j=c(2933),Q=c(5789),L=c(7039),$=(c(4078),c(8686)),Y=c(5012),K=c(2827),V=c(5285);const B=["modalHeaderMapModal"];function W(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"i",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw().changeSortName(i.key)}),e.qZA()}if(2&s){const t=e.oxw().$implicit,a=e.oxw();e.Gre("fa float-right fa-sort-amount-",a.sortType,""),e.Q6J("ngClass",a.sortName==t.key?"text-success":"text-muted")}}function z(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"div",24),e.TgZ(1,"input",25),e.NdJ("change",function(i){return e.CHM(t),e.oxw(2).checkbox(i.target.checked)}),e.qZA(),e._UZ(2,"label",26),e.qZA()}if(2&s){const t=e.oxw().$implicit,a=e.oxw();e.xp6(1),e.s9C("id",t.name),e.Q6J("value",t.value||null===t.value?t.value:a.searchObj[t.searchKey?t.searchKey:t.key]?a.searchObj[t.searchKey?t.searchKey:t.key]:"")("checked",a.checkAllCheckedModalStatus),e.xp6(1),e.s9C("for",t.name)}}function X(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"input",30),e.NdJ("input",function(i){e.CHM(t);const o=e.oxw(2).$implicit;return e.oxw().searchTerm$.next({key:o.searchKey?o.searchKey:o.key,value:i.target.value})})("keydown.tab",function(i){e.CHM(t);const o=e.oxw(2).$implicit;return e.oxw().searchRes(o.searchKey?o.searchKey:o.key,i.target.value)})("keyup.enter",function(i){e.CHM(t);const o=e.oxw(2).$implicit;return e.oxw().searchRes(o.searchKey?o.searchKey:o.key,i.target.value)})("focusout",function(i){e.CHM(t);const o=e.oxw(2).$implicit;return e.oxw().searchRes(o.searchKey?o.searchKey:o.key,i.target.value)}),e.qZA()}if(2&s){const t=e.oxw(2).$implicit,a=e.oxw();e.Q6J("title",t.title?t.title:"")("value",t.value||null===t.value?t.value:a.searchObj[t.searchKey?t.searchKey:t.key]?a.searchObj[t.searchKey?t.searchKey:t.key]:"")}}function ee(s,n){if(1&s&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&s){const t=n.$implicit,a=e.oxw(3).$implicit,i=e.oxw();e.Q6J("value",t.id)("selected",a.value?a.value:i.searchObj[a.searchKey?a.searchKey:a.key]==t.id),e.xp6(1),e.Oqu(t.name)}}function te(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"select",31),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw(2).$implicit;return e.oxw().searchRes(o.searchKey?o.searchKey:o.key,i.target.value)}),e.YNc(1,ee,2,3,"option",32),e.qZA()}if(2&s){const t=e.oxw(2).$implicit;e.Q6J("multiple","multiple"===t.options)("title",t.title?t.title:""),e.xp6(1),e.Q6J("ngForOf",t.selectData)}}const v=function(s){return{width:s}};function ae(s,n){if(1&s&&(e.TgZ(0,"label",27),e.YNc(1,X,1,2,"input",28),e.YNc(2,te,2,3,"select",29),e.qZA()),2&s){const t=e.oxw().$implicit;e.Q6J("ngClass",t.inputWidth?"":t.otherField?t.otherField.length>1?"":"col-6":"col-12")("ngStyle",t.inputWidth?e.VKq(4,v,t.inputWidth):null),e.xp6(1),e.Q6J("ngIf",!t.type||"text"===t.type),e.xp6(1),e.Q6J("ngIf","select"===t.type)}}function ie(s,n){if(1&s&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&s){const t=n.$implicit,a=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("value",t.id)("selected",a.value?a.value:i.searchObj[a.key]==t.id),e.xp6(1),e.Oqu(t.name)}}function se(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"select",36),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(2).searchRes(o.key,i.target.value)}),e.YNc(1,ie,2,3,"option",32),e.qZA()}if(2&s){const t=e.oxw().$implicit;e.Q6J("title",t.title?t.title:""),e.xp6(1),e.Q6J("ngForOf",t.selectData)}}function ne(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"input",37),e.NdJ("input",function(i){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(2).searchTerm$.next({key:o.key,value:i.target.value})})("keydown.tab",function(i){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(2).searchRes(o.key,i.target.value)})("keyup.enter",function(i){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(2).searchRes(o.key,i.target.value)})("focusout",function(i){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(2).searchRes(o.key,i.target.value)}),e.qZA()}if(2&s){const t=e.oxw().$implicit,a=e.oxw(2);e.Q6J("title",t.title?t.title:"")("value",t.value||null===t.value?t.value:a.searchObj[t.key]?a.searchObj[t.key]:"")}}const x=function(s){return{"min-width":s}};function oe(s,n){if(1&s&&(e.TgZ(0,"label",27),e.YNc(1,se,2,2,"select",34),e.YNc(2,ne,1,2,"input",35),e.qZA()),2&s){const t=n.$implicit,a=e.oxw().$implicit;e.Q6J("ngClass",a.otherField.length>1||t.width?"":"col-6")("ngStyle",t.width?e.VKq(4,v,t.width):t.minWidth?e.VKq(6,x,t.minWidth):null),e.xp6(1),e.Q6J("ngIf","select"===t.type),e.xp6(1),e.Q6J("ngIf",!t.type||"text"===t.type)}}function ce(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"input",44),e.NdJ("input",function(i){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(3).searchTerm$.next({key:o.key,value:i.target.value})})("keydown.tab",function(i){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(3).searchRes(o.key,i.target.value)})("keyup.enter",function(i){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(3).searchRes(o.key,i.target.value)})("focusout",function(i){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(3).searchRes(o.key,i.target.value)}),e.qZA()}if(2&s){const t=e.oxw().$implicit,a=e.oxw(3);e.Q6J("title",t.title?t.title:"")("value",t.value||null===t.value?t.value:a.searchObj[t.key]?a.searchObj[t.key]:"")}}function re(s,n){if(1&s&&(e.TgZ(0,"span",42),e.TgZ(1,"label"),e._uU(2),e.qZA(),e.YNc(3,ce,1,2,"input",43),e.qZA()),2&s){const t=n.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",!t.type||"text"===t.type)}}function le(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"div",38),e.YNc(1,re,4,2,"span",39),e.TgZ(2,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).showModal()}),e._UZ(3,"i",41),e.qZA(),e.qZA()}if(2&s){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.otherFieldMap)}}function de(s,n){if(1&s&&(e.TgZ(0,"th",17),e.TgZ(1,"div"),e._uU(2),e.YNc(3,W,1,4,"i",18),e.qZA(),e.YNc(4,z,3,4,"div",19),e.TgZ(5,"div"),e.YNc(6,ae,3,6,"label",20),e.YNc(7,oe,3,8,"label",21),e.YNc(8,le,4,1,"div",22),e.qZA(),e.qZA()),2&s){const t=n.$implicit;e.Q6J("ngStyle",t.width?e.VKq(7,v,t.width):t.minWidth?e.VKq(9,x,t.minWidth):null),e.xp6(2),e.hij("",t.name," "),e.xp6(1),e.Q6J("ngIf",t.sortable),e.xp6(1),e.Q6J("ngIf",t.checkAllModal),e.xp6(2),e.Q6J("ngIf",t.searchInput),e.xp6(1),e.Q6J("ngForOf",t.otherField),e.xp6(1),e.Q6J("ngIf",t.otherFieldMap)}}const pe=["*"];let he=(()=>{class s{constructor(t){this.paginateService=t,this.checkAllModal=new e.vpe,this.searchTerm$=new D.xQ,this.source=new V.Z({wrapX:!1}),this.searchObj={},this.searchTerm$.debounceTime(1e3).distinctUntilChanged().subscribe(a=>{this.searchRes(a.key,a.value)})}get sortType(){return this.paginateService.sortType}get sortName(){return this.paginateService.sortName}changeSortName(t){this.paginateService.setEmptyPaginateResult(),this.paginateService.setSortTypeAndNameStorage(t),this.paginateService.resultSource.next(!0)}changeHeaderParamsToDefaultValue(){for(let t=0;t<this.headerParams.length;t++){const a=this.headerParams[t];(a.value||null===a.value)&&(this.searchObj[a.searchKey?a.searchKey:a.key]=a.value)}}ngOnInit(){this.searchObj=JSON.parse(this.paginateService.getSessionStorage("_DIVIDED_SEARCH_VALUES")),this.searchObj||(this.searchObj={})}ngOnDestroy(){this.paginateService.resultSource.next(null)}closeModal(){this.map.addLayer(new ol.layer.Tile({source:new ol.source.OSM}))}setPointValue(){this.modalHeaderMapModal.hide(),this.map.addLayer(new ol.layer.Tile({source:new ol.source.OSM}));const a=document.getElementById("mapModalInput").getElementsByTagName("input");for(let i=0;i<a.length;i++)a[i].value=this.coordinate[i];this.searchRes("x",this.coordinate[0]),setTimeout(()=>{this.searchRes("y",this.coordinate[1])},100)}getPosition(){this.map.addLayer(new ol.layer.Tile({source:new ol.source.OSM})),this.coordinate=document.getElementById("mouse-position-modal").innerText.split(", "),this.vectorLayer=new ol.layer.Vector({source:new ol.source.Vector({features:[new ol.Feature({geometry:new ol.geom.Point(ol.proj.transform([this.coordinate[0],this.coordinate[1]],"EPSG:4326","EPSG:3857"),"XY")})]}),style:new ol.style.Style({image:new j.Z({radius:8,fill:new Q.Z({color:"#3399CC"}),stroke:new L.Z({color:"#fff",width:2})})})}),this.map.addLayer(this.vectorLayer)}showModal(){this.modalHeaderMapModal.show(),setTimeout(()=>{this.map?this.map.addLayer(new ol.layer.Tile({source:new ol.source.OSM})):(this.mousePositionControl=new $.Z({coordinateFormat:(0,Y.Fj)(4),projection:"EPSG:4326",target:document.getElementById("mouse-position-modal"),className:"custom-mouse-position-modal",undefinedHTML:"&nbsp;"}),this.map=new ol.Map({controls:(0,K.ce)().extend([this.mousePositionControl]),target:"modalHeaderMapModal",layers:[new ol.layer.Tile({source:new ol.source.OSM})]}));const t=this.map.getView();t.setCenter(ol.proj.fromLonLat([44.50349,40.1772])),t.setZoom(12),this.addInteraction()},300)}addInteraction(){this.draw=new F.ZP({source:this.source,type:"Point"}),this.map.addInteraction(this.draw)}ngAfterViewInit(){this.changeHeaderParamsToDefaultValue(),0!==Object.keys(this.searchObj).length&&this.searchObj.constructor===Object&&this.paginateService.resultSource.next(this.searchObj)}checkbox(t){this.checkAllModal.emit(t)}searchRes(t,a){this.searchObj[t]!==a&&(this.searchObj[t]=a,this.val&&(this.searchObj[t]=this.val),this.paginateService.setSessionStorage("DIVIDED_SEARCH_VALUES",JSON.stringify(this.searchObj)),this.paginateService.setEmptyPaginateResult(),this.paginateService.paginateSetPageStorage(0),this.paginateService.setSortTypeAndNameStorage(""),this.paginateService.sortType="desc",this.paginateService.resultSource.next(this.searchObj))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-sortable-table-header-modal"]],viewQuery:function(t,a){if(1&t&&e.Gf(B,7),2&t){let i;e.iGM(i=e.CRH())&&(a.modalHeaderMapModal=i.first)}},inputs:{headerParams:"headerParams",checkAllCheckedModalStatus:"checkAllCheckedModalStatus"},outputs:{checkAllModal:"checkAllModal"},ngContentSelectors:pe,decls:23,vars:1,consts:[[1,"table","table-striped","table-bordered","datatable","dataTable","no-footer",2,"border-collapse","collapse !important"],["role","row"],["class","",3,"ngStyle",4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade",3,"onHidden"],["modalHeaderMapModal","bs-modal"],["role","document",1,"modal-dialog","modal-info","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","modalHeaderMapModal",2,"width","100%","height","300px",3,"click"],["id","mouse-position-modal"],[1,"row","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-info",3,"click"],[1,"",3,"ngStyle"],["id","sortIcon","aria-hidden","true",3,"class","ngClass","click",4,"ngIf"],["class","text-center custom-control custom-checkbox",4,"ngIf"],["class","m-0 p-0",3,"ngClass","ngStyle",4,"ngIf"],["class","m-0 p-0",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],["id","mapModalInput","class","col-12",4,"ngIf"],["id","sortIcon","aria-hidden","true",3,"ngClass","click"],[1,"text-center","custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"id","value","checked","change"],[1,"custom-control-label",3,"for"],[1,"m-0","p-0",3,"ngClass","ngStyle"],["type","text","class","col-12 p-0 search",3,"title","value","input","keydown.tab","keyup.enter","focusout",4,"ngIf"],["class","col-12 p-0",3,"multiple","title","change",4,"ngIf"],["type","text",1,"col-12","p-0","search",3,"title","value","input","keydown.tab","keyup.enter","focusout"],[1,"col-12","p-0",3,"multiple","title","change"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],["class","col-12 p-0 w-100",3,"title","change",4,"ngIf"],["type","text","class","w-100 p-0 m-0 ml-1 search",3,"title","value","input","keydown.tab","keyup.enter","focusout",4,"ngIf"],[1,"col-12","p-0","w-100",3,"title","change"],["type","text",1,"w-100","p-0","m-0","ml-1","search",3,"title","value","input","keydown.tab","keyup.enter","focusout"],["id","mapModalInput",1,"col-12"],["class","col-4",4,"ngFor","ngForOf"],["title","Set Location",1,"btn","col-1","ml-3","btn-primary",3,"click"],[1,"cui-location-pin"],[1,"col-4"],["type","text","class","ml-1 search",3,"title","value","input","keydown.tab","keyup.enter","focusout",4,"ngIf"],["type","text",1,"ml-1","search",3,"title","value","input","keydown.tab","keyup.enter","focusout"]],template:function(t,a){if(1&t){const i=e.EpF();e.F$t(),e.TgZ(0,"table",0),e.TgZ(1,"thead"),e.TgZ(2,"tr",1),e.YNc(3,de,9,11,"th",2),e.qZA(),e.qZA(),e.Hsn(4),e.qZA(),e.TgZ(5,"div",3,4),e.NdJ("onHidden",function(){return a.closeModal()}),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"h4",8),e._uU(11,"Select Point "),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return e.CHM(i),e.MAs(6).hide()}),e.TgZ(13,"span",10),e._uU(14,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",11),e.TgZ(16,"div",12),e.NdJ("click",function(){return a.getPosition()}),e.qZA(),e._UZ(17,"div",13),e.TgZ(18,"div",14),e.TgZ(19,"button",15),e.NdJ("click",function(){return e.CHM(i),e.MAs(6).hide()}),e._uU(20," Cancel "),e.qZA(),e.TgZ(21,"button",16),e.NdJ("click",function(){return a.setPointValue()}),e._uU(22," Set point for search "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(3),e.Q6J("ngForOf",a.headerParams))},directives:[l.sg,l.PC,l.O5,l.mk,d.YN,d.Kr,f.oB],styles:["#sortIcon[_ngcontent-%COMP%]{cursor:pointer}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:top}"]}),s})();function ge(s,n){1&s&&(e.TgZ(0,"div",5),e._uU(1,"Result not found"),e.qZA())}function ue(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"li",9),e.TgZ(1,"a",10),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).paginateStepPrev()}),e._UZ(2,"i",15),e.qZA(),e.qZA()}if(2&s){const t=e.oxw(2);e.Q6J("ngClass",0==t.getPaginateService.bigPaginateIntervalNumber?"disabled":"")}}function _e(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"li",16),e.TgZ(1,"a",10),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw(2).paginateSet(o)}),e._uU(2),e.qZA(),e.qZA()}if(2&s){const t=n.$implicit,a=e.oxw(2);e.Q6J("ngClass",a.getPaginateService.page==t?"active":""),e.xp6(2),e.Oqu(t+1)}}function me(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"li",14),e.TgZ(1,"a",10),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).paginateStepNext()}),e._UZ(2,"i",17),e.qZA(),e.qZA()}if(2&s){const t=e.oxw(2);e.Q6J("ngClass",t.getPaginateService.bigPaginateIntervalNumber==t.getPaginateService.intervalCount-1?"disabled":"")}}function fe(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"div",7),e.TgZ(2,"ul",8),e.TgZ(3,"li",9),e.TgZ(4,"a",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().paginatePrev()}),e._uU(5,"Previous"),e.qZA(),e.qZA(),e.YNc(6,ue,3,1,"li",11),e.YNc(7,_e,3,2,"li",12),e.YNc(8,me,3,1,"li",13),e.TgZ(9,"li",14),e.TgZ(10,"a",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().paginateNext()}),e._uU(11,"Next"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("ngClass",0==t.getPaginateService.page?"disabled":""),e.xp6(3),e.Q6J("ngIf",t.getPaginateService.intervalCount>1),e.xp6(1),e.Q6J("ngForOf",t.getPaginateService.showPaginationList),e.xp6(1),e.Q6J("ngIf",t.getPaginateService.intervalCount>1),e.xp6(1),e.Q6J("ngClass",t.getPaginateService.page==t.getPaginateService.paginateResult.length-1?"disabled":"")}}let ve=(()=>{class s{constructor(t){this.paginateService=t,this.getPaginateService.allRecordCount=0}get getPaginateService(){return this.paginateService}paginatePrev(){this.paginateService.page>0&&(this.paginateService.paginateSetPageStorage(this.paginateService.page-=1),this.paginateService.resultSource.next(!0))}paginateNext(){this.paginateService.page<this.paginateService.paginateResult.length&&(this.paginateService.paginateSetPageStorage(this.paginateService.page+=1),this.paginateService.resultSource.next(!0))}paginateSet(t){this.paginateService.page!==t&&(this.paginateService.paginateSetPageStorage(t),this.paginateService.resultSource.next(!0))}ngOnInit(){this.changePaginateShowCount(window.innerWidth)}paginateStepNext(){this.paginateService.bigPaginateIntervalNumber<this.paginateService.intervalCount&&(console.log(this.paginateService.bigPaginateIntervalNumber,this.paginateService.intervalCount),this.paginateService.bigPaginateIntervalNumber+=1,this.paginateService.paginateSetPageStorage(this.paginateService.bigPaginateIntervalNumber*this.paginateService.paginateMaxShowedCount),this.paginateService.resultSource.next(!0))}paginateStepPrev(){this.paginateService.bigPaginateIntervalNumber>0&&(console.log(this.paginateService.bigPaginateIntervalNumber,this.paginateService.intervalCount),this.paginateService.bigPaginateIntervalNumber-=1,this.paginateService.paginateSetPageStorage(this.paginateService.bigPaginateIntervalNumber*this.paginateService.paginateMaxShowedCount),this.paginateService.resultSource.next(!0))}ngAfterViewInit(){}changePaginateShowCount(t){console.log(t);let a=10;t>1500?a=20:t<1500&&t>700?a=10:t<700&&(a=5),this.paginateService.paginateMaxShowedCount!==a&&(this.paginateService.paginateMaxShowedCount=a,this.paginateService.calculateBigPaginate())}onResize(t){this.changePaginateShowCount(t.target.innerWidth)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-paginate-modal"]],hostBindings:function(t,a){1&t&&e.NdJ("resize",function(o){return a.onResize(o)},!1,e.Jf7)},decls:7,vars:3,consts:[[1,"row"],[1,"col","d-flex","justify-content-lg-start","justify-content-center","align-items-center"],["class","col-12 text-warning",4,"ngIf"],[1,"col-12"],["class","col d-flex justify-content-lg-end justify-content-center align-items-center",4,"ngIf"],[1,"col-12","text-warning"],[1,"col","d-flex","justify-content-lg-end","justify-content-center","align-items-center"],[1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination","d-flex","align-items-center","mb-0"],[1,"paginate_button","page-item","previous",3,"ngClass"],["href","javascript:void(0)",1,"page-link",3,"click"],["class","paginate_button page-item previous",3,"ngClass",4,"ngIf"],["class","paginate_button page-item",3,"ngClass",4,"ngFor","ngForOf"],["class","paginate_button page-item next",3,"ngClass",4,"ngIf"],[1,"paginate_button","page-item","next",3,"ngClass"],[1,"fa","fa-angle-double-left"],[1,"paginate_button","page-item",3,"ngClass"],[1,"fa","fa-angle-double-right"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",0),e.YNc(3,ge,2,0,"div",2),e.TgZ(4,"div",3),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.YNc(6,fe,12,5,"div",4),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",0===a.getPaginateService.allRecordCount),e.xp6(2),e.hij("All entries ",a.getPaginateService.allRecordCount," item"),e.xp6(1),e.Q6J("ngIf",a.getPaginateService.paginateResult.length>1))},directives:[l.O5,l.mk,l.sg],styles:[""]}),s})();function Ae(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"a",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().attachAsset("")}),e._UZ(1,"i",15),e._uU(2," Attach Assets"),e.qZA()}}function Te(s,n){if(1&s&&(e.TgZ(0,"span",30),e._uU(1),e.qZA()),2&s){const t=e.oxw(2).$implicit;e.xp6(1),e.hij("Longitude ",null==t.point?null:t.point.coordinates[1],"")}}function be(s,n){if(1&s&&(e.TgZ(0,"span",28),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.YNc(3,Te,2,1,"span",29),e.qZA()),2&s){const t=e.oxw().$implicit;e.xp6(2),e.hij("Latitude ",null==t.point?null:t.point.coordinates[0],""),e.xp6(1),e.Q6J("ngIf",t.point)}}function Se(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"tr",16),e.TgZ(1,"td",17),e.TgZ(2,"div",18),e.TgZ(3,"input",19),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().addRemoveAsset(o.id)}),e.qZA(),e._UZ(4,"label",20),e.qZA(),e.qZA(),e.TgZ(5,"td",21),e._uU(6),e.qZA(),e.TgZ(7,"td",21),e._uU(8),e.qZA(),e.TgZ(9,"td",22),e.YNc(10,be,4,2,"span",23),e.qZA(),e.TgZ(11,"td",24),e.TgZ(12,"span",25),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"td",26),e.TgZ(15,"button",27),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().attachAsset(o.id)}),e._UZ(16,"i",15),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=n.$implicit,a=e.oxw();e.xp6(3),e.s9C("id",t.id),e.Q6J("checked",a.checkCheckedAsset(t.id)),e.xp6(1),e.s9C("for",t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.dsc),e.xp6(2),e.Q6J("ngIf",t.point),e.xp6(2),e.ekj("badge-success","ENABLE"===t.status)("badge-danger","DISABLE"===t.status),e.xp6(1),e.hij(" ",t.status," "),e.xp6(2),e.Q6J("disabled","DISABLE"===t.status)}}const Ze=function(){return{key:"all",name:"Select",width:"38px",sortable:!1,checkAllModal:!0}},ye=function(){return{key:"name",name:"Name",sortable:!0,minWidth:"80px",searchKey:"name",searchInput:!0}},xe=function(){return{key:"dsc",name:"Description",searchKey:"dsc",sortable:!0,minWidth:"80px",searchInput:!0}},Ce=function(){return{key:"point",name:"Coordinates",sortable:!1,searchKey:"point",width:"80px",searchInput:!1}},we=function(s){return{key:"status",name:"Status",sortable:!0,searchKey:"status",minWidth:"80px",searchInput:!0,type:"select",selectData:s}},Me=function(){return{key:"action",name:"Action",width:"38px",sortable:!1}},ke=function(s,n,t,a,i,o){return[s,n,t,a,i,o]};let C=(()=>{class s{constructor(t,a,i){this.http=t,this.alertMessageService=a,this.paginateService=i,this.refreshResult=new e.vpe,this.attachToGatAsset=[],this.groupEdit=!1,this.checkAllCheckedStatus$=!1,this.searchData={},this.paginateService.sessionPrefix="NOT_ATTACHED_ASSET_LIST"}get getPaginateService(){return this.paginateService}refreshAll(){this.paginateService.setEmptyPaginateResult(),this.getResult()}addRemoveAsset(t){let a=!0;for(let i=0;i<this.attachToGatAsset.length;i++)if(this.attachToGatAsset[i]===t){a=!1,this.attachToGatAsset.splice(i,1);break}a&&this.attachToGatAsset.push(t)}checkAll(t){this.checkAllCheckedStatus$=t;const a=this.getPaginateService.paginateResult[this.getPaginateService.page];for(const i in a)a.hasOwnProperty(i)&&(this.checkCheckedAsset(a[i].id)&&!t&&this.addRemoveAsset(a[i].id),!this.checkCheckedAsset(a[i].id)&&t&&this.addRemoveAsset(a[i].id))}attachAsset(t){let a="The asset has been successfully attached";const i={assignedGatewayId:this.received.partitionId,assignedAssetIdList:[t]};!t&&this.attachToGatAsset&&(i.assignedAssetIdList=this.attachToGatAsset,a="Assets are successfully attached"),this.http.post(h.A.httpUrl.resource_server+"/attached-asset",i).subscribe(()=>{this.alertMessageService.addSuccessMessage(a),this.attachToGatAsset=[],this.refreshResult.emit(),this.checkAllCheckedStatus$=!1},o=>{this.alertMessageService.addDangerMessage(o.error.message)})}checkCheckedAsset(t){for(let a=0;a<this.attachToGatAsset.length;a++)if(this.attachToGatAsset[a]===t)return!0}ngOnInit(){this.paginateService.restartPaginate()}ngAfterViewInit(){this.subscription=this.paginateService.getResult.subscribe(t=>this.getResult(t))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}getResult(t){if(this.paginateService.checkPageEmpty()){(0,m.K)(t)&&(this.searchData=t);const a="?"+this.paginateService.getRequestParamsFromObject(this.searchData);this.http.get(h.A.httpUrl.resource_server+"/assigned-asset/get-not-attached-assets"+a).subscribe(i=>{this.paginateService.allRecordCount=i.totalElements,this.paginateService.calculatePaginate(i.content)},i=>{404===i.status&&this.alertMessageService.addDangerMessage(i.error.message)})}}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(g.eN),e.Y36(u.O),e.Y36(_))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-not-attached-assets"]],inputs:{received:"received"},outputs:{refreshResult:"refreshResult"},decls:19,vars:18,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-edit"],[1,"float-right","m-0"],["title","Attach Assets","href","javascript:void(0)","class","mx-3 px-4 py-1 btn-success text-white",3,"click",4,"ngIf"],["href","javascript:void(0)","title","refresh",1,"ml-4",3,"click"],["aria-hidden","true",1,"fa","fa-refresh"],[1,"card-body"],[1,"dataTables_wrapper","dt-bootstrap4","no-footer"],[1,"row"],[1,"col-sm-12","col-md-6"],[1,"col-sm-12","table-parent"],[3,"headerParams","checkAllCheckedModalStatus","checkAllModal"],["class","odd",4,"ngFor","ngForOf"],["title","Attach Assets","href","javascript:void(0)",1,"mx-3","px-4","py-1","btn-success","text-white",3,"click"],[1,"icon-tag"],[1,"odd"],[1,"pl-3"],[1,"text-center","custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",2,"cursor","pointer",3,"id","checked","click"],[1,"custom-control-label",3,"for"],[1,""],[1,"align-middle"],["class","ml-2 align-middle",4,"ngIf"],[1,"text-center"],[1,"badge"],[1,"edit"],["title","Attach",1,"btn","ml-3","btn-success",3,"disabled","click"],[1,"ml-2","align-middle"],["class","ml-3",4,"ngIf"],[1,"ml-3"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"i",2),e._uU(3,"Not Attached To Gateway Assets "),e.TgZ(4,"p",3),e.YNc(5,Ae,3,0,"a",4),e.TgZ(6,"a",5),e.NdJ("click",function(){return a.refreshAll()}),e._UZ(7,"i",6),e._uU(8," Reload "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e._UZ(12,"app-paginate-show-count-module",10),e.qZA(),e.TgZ(13,"div",9),e.TgZ(14,"div",11),e.TgZ(15,"app-sortable-table-header-modal",12),e.NdJ("checkAllModal",function(o){return a.checkAll(o)}),e.TgZ(16,"tbody"),e.YNc(17,Se,17,12,"tr",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(18,"app-paginate-modal"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngIf",a.attachToGatAsset.length>1),e.xp6(10),e.Q6J("headerParams",e.HTZ(11,ke,e.DdM(4,Ze),e.DdM(5,ye),e.DdM(6,xe),e.DdM(7,Ce),e.VKq(8,we,a.received.status),e.DdM(10,Me)))("checkAllCheckedModalStatus",a.checkAllCheckedStatus$),e.xp6(2),e.Q6J("ngForOf",a.getPaginateService.paginateResult[a.getPaginateService.page]))},directives:[l.O5,G,he,l.sg,ve],styles:[""]}),s})(),Pe=(()=>{class s{constructor(t,a,i,o){this.http=t,this.router=a,this.route=i,this.alertMessageService=o,this.sendingChild={partitionId:null,status:[]}}refreshAll(){this.notAttachedAsset.refreshAll(),this.attachedAsset.refreshAll()}ngOnInit(){this.gatewayName=sessionStorage.getItem("ATTACH_ASSET_GATEWAY_NAME"),this.partitionId=this.route.snapshot.params.id,this.sendingChild.partitionId=this.partitionId,this.http.get(h.A.httpUrl.resource_server+"/asset-model/status").subscribe(t=>{this.sendingChild.status.push({id:null,name:"All"});for(let a=0;a<t.length;a++)this.sendingChild.status.push({id:t[a],name:t[a]})},t=>{404===t.status&&this.alertMessageService.addDangerMessage(t.error.message)})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(g.eN),e.Y36(p.F0),e.Y36(p.gz),e.Y36(u.O))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-add-object-type"]],viewQuery:function(t,a){if(1&t&&(e.Gf(y,7),e.Gf(C,7)),2&t){let i;e.iGM(i=e.CRH())&&(a.attachedAsset=i.first),e.iGM(i=e.CRH())&&(a.notAttachedAsset=i.first)}},decls:17,vars:3,consts:[[1,"card"],[1,"card-header"],[1,"text-warning"],["routerLink","../../","href","javascript:void(0)","title","Back",1,"float-right","text-danger"],["aria-hidden","true",1,"fa","fa-arrow-left"],[3,"received","refreshResult"],[1,"col-12","mt-3"],[1,"card-body"],[1,"animated","fadeIn"],[1,"card-footer"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"strong"),e._uU(3,"Attach Detach Assets to "),e.TgZ(4,"span",2),e._uU(5),e.qZA(),e._uU(6," Gateway"),e.qZA(),e.TgZ(7,"a",3),e._UZ(8,"i",4),e._uU(9," Back"),e.qZA(),e.qZA(),e.TgZ(10,"app-attached-assets",5),e.NdJ("refreshResult",function(){return a.refreshAll()}),e.qZA(),e.TgZ(11,"div",6),e.TgZ(12,"div",7),e.TgZ(13,"div"),e.TgZ(14,"div",8),e.TgZ(15,"app-not-attached-assets",5),e.NdJ("refreshResult",function(){return a.refreshAll()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(16,"div",9),e.qZA()),2&t&&(e.xp6(5),e.Oqu(a.gatewayName),e.xp6(5),e.Q6J("received",a.sendingChild),e.xp6(5),e.Q6J("received",a.sendingChild))},directives:[p.yS,y,C],styles:[""]}),s})();const qe=["confirmAssignModal"];function Ie(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"a",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().assignGroupAsset()}),e._UZ(1,"i",17),e._uU(2," Assign Assets"),e.qZA()}}function Ne(s,n){if(1&s&&(e.TgZ(0,"span",30),e._uU(1),e.qZA()),2&s){const t=e.oxw(2).$implicit;e.xp6(1),e.hij("Longitude ",null==t.point?null:t.point.coordinates[1],"")}}function Re(s,n){if(1&s&&(e.TgZ(0,"span",28),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.YNc(3,Ne,2,1,"span",29),e.qZA()),2&s){const t=e.oxw().$implicit;e.xp6(2),e.hij("Latitude ",null==t.point?null:t.point.coordinates[0],""),e.xp6(1),e.Q6J("ngIf",t.point)}}const Oe=function(s){return["../",s,"attach-detach"]};function He(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"tr",18),e.TgZ(1,"td",19),e._uU(2),e.qZA(),e.TgZ(3,"td",20),e._uU(4),e.qZA(),e.TgZ(5,"td",20),e._uU(6),e.qZA(),e.TgZ(7,"td",21),e.YNc(8,Re,4,2,"span",22),e.qZA(),e.TgZ(9,"td",23),e.TgZ(10,"span",24),e._uU(11),e.qZA(),e.qZA(),e.TgZ(12,"td",25),e.TgZ(13,"button",26),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().setGatewayName(o.name)}),e._UZ(14,"i",27),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=n.$implicit,a=n.index,i=e.oxw();e.xp6(2),e.Oqu(i.getPaginateService.page*i.getPaginateService.showCount+a+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.dsc),e.xp6(2),e.Q6J("ngIf",t.point),e.xp6(2),e.ekj("badge-success","ENABLE"===t.status)("badge-danger","DISABLE"===t.status),e.xp6(1),e.hij(" ",t.status," "),e.xp6(2),e.Q6J("disabled","DISABLE"===t.status)("routerLink",e.VKq(11,Oe,t.id))}}const Je=function(){return{key:"id",name:"No",sortable:!1,width:"38px"}},Ue=function(){return{key:"name",name:"Name",sortable:!1,minWidth:"80px",searchKey:"name",searchInput:!1}},Ee=function(){return{key:"dsc",name:"Description",searchKey:"dsc",sortable:!1,minWidth:"80px",searchInput:!1}},Ge=function(){return{key:"point",name:"Point",sortable:!1,searchKey:"point",width:"80px",searchInput:!1}},De=function(s){return{key:"status",name:"Status",sortable:!1,searchKey:"status",width:"80px",searchInput:!1,type:"select",selectData:s}},Fe=function(){return{key:"action",name:"Action",width:"38px",sortable:!1}},je=function(s,n,t,a,i,o){return[s,n,t,a,i,o]},Qe=[{path:"",redirectTo:"list"},{path:"",component:w,children:[{path:"list",component:(()=>{class s{constructor(t,a,i){this.http=t,this.alertMessageService=a,this.paginateService=i,this.statusDates=[],this.attachedstatusDates=[],this.assignToPartAsset=[],this.groupEdit=!1,this.checkAllCheckedStatus$=!1,this.searchData={},this.paginateService.sessionPrefix="GATEWAY_PROVIDING_LIST"}get getPaginateService(){return this.paginateService}ngOnInit(){this.paginateService.restartPaginate(),this.http.get(h.A.httpUrl.resource_server+"/asset-model/status").subscribe(t=>{this.statusDates.push({id:null,name:"All"});for(let a=0;a<t.length;a++)this.statusDates.push({id:t[a],name:t[a]})},t=>{404===t.status&&this.alertMessageService.addDangerMessage(t.error.message)}),this.subscription=this.paginateService.getResult.subscribe(t=>this.getResult(t))}showAssignModal(t){this.assignPartitionId=t,this.confirmAssignModal.show()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}assignGroupAsset(){this.groupEdit=!0,this.confirmAssignModal.show()}setGatewayName(t){sessionStorage.setItem("ATTACH_ASSET_GATEWAY_NAME",t)}checkAll(t){this.checkAllCheckedStatus$=t;const a=this.getPaginateService.paginateResult[this.getPaginateService.page];for(const i in a)a.hasOwnProperty(i)&&(this.checkCheckedAsset(a[i].id)&&!t&&this.addRemoveAsset(a[i].id),!this.checkCheckedAsset(a[i].id)&&t&&this.addRemoveAsset(a[i].id))}addRemoveAsset(t){let a=!0;for(let i=0;i<this.assignToPartAsset.length;i++)if(this.assignToPartAsset[i].id===t){a=!1,this.assignToPartAsset.splice(i,1);break}a&&this.assignToPartAsset.push({id:t})}checkCheckedAsset(t){for(let a=0;a<this.assignToPartAsset.length;a++)if(this.assignToPartAsset[a].id===t)return!0}refreshAll(){this.paginateService.setEmptyPaginateResult(),this.getResult()}getResult(t){if(this.paginateService.checkPageEmpty()){(0,m.K)(t)&&(this.searchData=t);const a="?"+this.paginateService.getRequestParamsFromObject(this.searchData);this.http.get(h.A.httpUrl.resource_server+"/assigned-asset/get-gateways-by-partition-id"+a).subscribe(i=>{this.paginateService.allRecordCount=i.length,this.paginateService.calculatePaginate(i)},i=>{404===i.status&&this.alertMessageService.addDangerMessage(i.error.message)})}}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(g.eN),e.Y36(u.O),e.Y36(T.r))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-list-gateway-providing"]],viewQuery:function(t,a){if(1&t&&e.Gf(qe,7),2&t){let i;e.iGM(i=e.CRH())&&(a.confirmAssignModal=i.first)}},decls:22,vars:18,consts:[["id","ui-view"],[1,"animated","fadeIn"],[1,"card"],[1,"card-header"],[1,"fa","fa-edit"],[1,"float-right","m-0"],["title","Assign Assets","href","javascript:void(0)","class","mx-3 px-4 py-1 btn-success text-white",3,"click",4,"ngIf"],["href","javascript:void(0)","title","refresh",1,"ml-4",3,"click"],["aria-hidden","true",1,"fa","fa-refresh"],[1,"card-body"],["id","DataTables_Table_0_wrapper",1,"dataTables_wrapper","dt-bootstrap4","no-footer"],[1,"row"],[1,"col-sm-12","col-md-6"],[1,"col-sm-12","table-parent"],[3,"headerParams","checkAllCheckedStatus","checkAll"],["class","odd",4,"ngFor","ngForOf"],["title","Assign Assets","href","javascript:void(0)",1,"mx-3","px-4","py-1","btn-success","text-white",3,"click"],[1,"cui-arrow-right"],[1,"odd"],[1,"listId"],[1,""],[1,"align-middle"],["class","ml-2 align-middle",4,"ngIf"],[1,"text-center"],[1,"badge"],[1,"edit"],["title","Attach Detach",1,"btn","btn-info",3,"disabled","routerLink","click"],[1,"fa","fa-exchange"],[1,"ml-2","align-middle"],["class","ml-3",4,"ngIf"],[1,"ml-3"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div"),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e._UZ(5,"i",4),e._uU(6," Attach or Detach Assets to Gateway "),e.TgZ(7,"p",5),e.YNc(8,Ie,3,0,"a",6),e.TgZ(9,"a",7),e.NdJ("click",function(){return a.refreshAll()}),e._UZ(10,"i",8),e._uU(11," Reload "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",9),e.TgZ(13,"div",10),e.TgZ(14,"div",11),e._UZ(15,"app-paginate-show-count",12),e.qZA(),e.TgZ(16,"div",11),e.TgZ(17,"div",13),e.TgZ(18,"app-sortable-table-header",14),e.NdJ("checkAll",function(o){return a.checkAll(o)}),e.TgZ(19,"tbody"),e.YNc(20,He,15,13,"tr",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(21,"app-paginate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Q6J("ngIf",a.assignToPartAsset.length>1),e.xp6(10),e.Q6J("headerParams",e.HTZ(11,je,e.DdM(4,Je),e.DdM(5,Ue),e.DdM(6,Ee),e.DdM(7,Ge),e.VKq(8,De,a.statusDates),e.DdM(10,Fe)))("checkAllCheckedStatus",a.checkAllCheckedStatus$),e.xp6(2),e.Q6J("ngForOf",a.getPaginateService.paginateResult[a.getPaginateService.page]))},directives:[l.O5,b.S,S.X,l.sg,p.rH,Z.c],styles:[""]}),s})(),data:{browserTitle:"Gateway Providing List"}},{path:":id/attach-detach",component:Pe,data:{title:"Attach or Detach Asset",browserTitle:"Attach or Detach Asset"}}]}];let Le=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[p.Bz.forChild(Qe)],p.Bz]}),s})();var $e=c(3150),Ye=c(4466),Ke=c(6217);let Ve=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[l.ez,Le,Ye.m,Ke.n,$e.Ob,f.zk.forRoot()]]}),s})()}}]);