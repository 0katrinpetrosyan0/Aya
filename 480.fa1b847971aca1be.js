"use strict";(self.webpackChunkng=self.webpackChunkng||[]).push([[480],{3480:(Me,H,h)=>{h.r(H),h.d(H,{OwnAssetModule:()=>Re});var M=h(2252),t=h(5e3);let rt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-asset-model"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"router-outlet")},directives:[M.lC],encapsulation:2}),i})();var i,y=h(3075),P=h(9713),at=h(6121),L=h(6321),ut=h(377),q=h(3023),m=h(254),_=h(6581),K=(i=function(s,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])})(s,e)},function(s,e){function n(){this.constructor=s}i(s,e),s.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),lt=function(i){function s(e){var n=i.call(this,ut.Z.ERROR)||this;return n.code=e.code,n.message=e.message,n}return K(s,i),s}(at.ZP),ct=function(i){function s(e){var n=i.call(this)||this,o=e||{};return n.position_=null,n.transform_=m.gD,n.watchId_=void 0,n.addEventListener((0,L.v_)("projection"),n.handleProjectionChanged_),n.addEventListener((0,L.v_)("tracking"),n.handleTrackingChanged_),void 0!==o.projection&&n.setProjection(o.projection),void 0!==o.trackingOptions&&n.setTrackingOptions(o.trackingOptions),n.setTracking(void 0!==o.tracking&&o.tracking),n}return K(s,i),s.prototype.disposeInternal=function(){this.setTracking(!1),i.prototype.disposeInternal.call(this)},s.prototype.handleProjectionChanged_=function(){var e=this.getProjection();e&&(this.transform_=(0,m.WO)((0,m.U2)("EPSG:4326"),e),this.position_&&this.set("position",this.transform_(this.position_)))},s.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var e=this.getTracking();e&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&void 0!==this.watchId_&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},s.prototype.positionChange_=function(e){var n=e.coords;this.set("accuracy",n.accuracy),this.set("altitude",null===n.altitude?void 0:n.altitude),this.set("altitudeAccuracy",null===n.altitudeAccuracy?void 0:n.altitudeAccuracy),this.set("heading",null===n.heading?void 0:(0,_.Yr)(n.heading)),this.position_?(this.position_[0]=n.longitude,this.position_[1]=n.latitude):this.position_=[n.longitude,n.latitude];var o=this.transform_(this.position_);this.set("position",o),this.set("speed",null===n.speed?void 0:n.speed);var r=(0,q.iu)(this.position_,n.accuracy);r.applyTransform(this.transform_),this.set("accuracyGeometry",r),this.changed()},s.prototype.positionError_=function(e){this.dispatchEvent(new lt(e))},s.prototype.getAccuracy=function(){return this.get("accuracy")},s.prototype.getAccuracyGeometry=function(){return this.get("accuracyGeometry")||null},s.prototype.getAltitude=function(){return this.get("altitude")},s.prototype.getAltitudeAccuracy=function(){return this.get("altitudeAccuracy")},s.prototype.getHeading=function(){return this.get("heading")},s.prototype.getPosition=function(){return this.get("position")},s.prototype.getProjection=function(){return this.get("projection")},s.prototype.getSpeed=function(){return this.get("speed")},s.prototype.getTracking=function(){return this.get("tracking")},s.prototype.getTrackingOptions=function(){return this.get("trackingOptions")},s.prototype.setProjection=function(e){this.set("projection",(0,m.U2)(e))},s.prototype.setTracking=function(e){this.set("tracking",e)},s.prototype.setTrackingOptions=function(e){this.set("trackingOptions",e)},s}(L.ZP);const ht=ct;var dt=h(881),gt=h(3400),O=h(7863);var pt=h(6117),U=h(5012),E=h(5414),N=h(8544);function W(i,s,e){return function(n,o,r,a){if(n){var l=s?0:r[0]*o,c=s?0:r[1]*o,u=i[0]+l/2,f=i[2]-l/2,p=i[1]+c/2,d=i[3]-c/2;u>f&&(f=u=(f+u)/2),p>d&&(d=p=(d+p)/2);var g=(0,_.uZ)(n[0],u,f),Z=(0,_.uZ)(n[1],p,d),v=30*o;return a&&e&&(g+=-v*Math.log(1+Math.max(0,u-n[0])/v)+v*Math.log(1+Math.max(0,n[0]-f)/v),Z+=-v*Math.log(1+Math.max(0,p-n[1])/v)+v*Math.log(1+Math.max(0,n[1]-d)/v)),[g,Z]}}}function mt(i){return i}var I=h(3303),B=h(6991);function V(i,s,e,n){var o=(0,I.dz)(s)/e[0],r=(0,I.Cr)(s)/e[1];return n?Math.min(i,Math.max(o,r)):Math.min(i,Math.min(o,r))}function J(i,s,e){var n=Math.min(i,s);return n*=Math.log(1+50*Math.max(0,i/s-1))/50+1,e&&(n=Math.max(n,e),n/=Math.log(1+50*Math.max(0,e/i-1))/50+1),(0,_.uZ)(n,e/2,2*s)}function $(i,s,e,n,o){return function(r,a,l,c){if(void 0!==r){var u=n?V(i,n,l,o):i;return(void 0===e||e)&&c?J(r,u,s):(0,_.uZ)(r,s,u)}}}function yt(i){if(void 0!==i)return 0}function X(i){if(void 0!==i)return i}var tt=h(512),Ct=function(){var i=function(s,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])})(s,e)};return function(s,e){function n(){this.constructor=s}i(s,e),s.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),_t=function(i){function s(e){var n=i.call(this)||this,o=(0,N.f0)({},e);return n.hints_=[0,0],n.animations_=[],n.projection_=(0,m.UQ)(o.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.cancelAnchor_=void 0,o.center&&(o.center=(0,m.Vs)(o.center,n.projection_)),o.extent&&(o.extent=(0,m.dY)(o.extent,n.projection_)),n.applyOptions_(o),n}return Ct(s,i),s.prototype.applyOptions_=function(e){var o=function wt(i){var s,e,n,a=void 0!==i.minZoom?i.minZoom:0,l=void 0!==i.maxZoom?i.maxZoom:28,c=void 0!==i.zoomFactor?i.zoomFactor:2,u=void 0!==i.multiWorld&&i.multiWorld,f=void 0===i.smoothResolutionConstraint||i.smoothResolutionConstraint,p=void 0!==i.showFullExtent&&i.showFullExtent,d=(0,m.UQ)(i.projection,"EPSG:3857"),g=d.getExtent(),Z=i.constrainOnlyCenter,v=i.extent;if(!u&&!v&&d.isGlobal()&&(Z=!1,v=g),void 0!==i.resolutions){var T=i.resolutions;e=T[a],n=void 0!==T[l]?T[l]:T[T.length-1],s=i.constrainResolution?function vt(i,s,e,n){return function(o,r,a,l){if(void 0!==o){var c=i[0],u=i[i.length-1],f=e?V(c,e,a,n):c;if(l)return void 0===s||s?J(o,f,u):(0,_.uZ)(o,u,f);var d=Math.min(f,o),g=Math.floor((0,B.h7)(i,d,r));return i[g]>f&&g<i.length-1?i[g+1]:i[g]}}}(T,f,!Z&&v,p):$(e,n,f,!Z&&v,p)}else{var C=(g?Math.max((0,I.dz)(g),(0,I.Cr)(g)):360*m.Wm[gt.Z.DEGREES]/d.getMetersPerUnit())/256/Math.pow(2,0),S=C/Math.pow(2,28);void 0!==(e=i.maxResolution)?a=0:e=C/Math.pow(c,a),void 0===(n=i.minResolution)&&(n=void 0!==i.maxZoom?void 0!==i.maxResolution?e/Math.pow(c,l):C/Math.pow(c,l):S),l=a+Math.floor(Math.log(e/n)/Math.log(c)),n=e/Math.pow(c,l-a),s=i.constrainResolution?function At(i,s,e,n,o,r){return function(a,l,c,u){if(void 0!==a){var f=o?V(s,o,c,r):s,p=void 0!==e?e:0;if(u)return void 0===n||n?J(a,f,p):(0,_.uZ)(a,p,f);var Z=Math.ceil(Math.log(s/f)/Math.log(i)-1e-9),v=-l*(.5-1e-9)+.5,T=Math.min(f,a),b=Math.floor(Math.log(s/T)/Math.log(i)+v),C=Math.max(Z,b),S=s/Math.pow(i,C);return(0,_.uZ)(S,p,f)}}}(c,e,n,f,!Z&&v,p):$(e,n,f,!Z&&v,p)}return{constraint:s,maxResolution:e,minResolution:n,minZoom:a,zoomFactor:c}}(e);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=e.resolutions,this.minZoom_=o.minZoom;var r=function Rt(i){if(void 0!==i.extent)return W(i.extent,i.constrainOnlyCenter,void 0===i.smoothExtentConstraint||i.smoothExtentConstraint);var e=(0,m.UQ)(i.projection,"EPSG:3857");if(!0!==i.multiWorld&&e.isGlobal()){var n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,W(n,!1,!1)}return mt}(e),a=o.constraint,l=function It(i){if(void 0===i.enableRotation||i.enableRotation){var e=i.constrainRotation;return void 0===e||!0===e?function Tt(i){var s=i||(0,_.Yr)(5);return function(e,n){return n?e:void 0!==e?Math.abs(e)<=s?0:e:void 0}}():!1===e?X:"number"==typeof e?function Zt(i){var s=2*Math.PI/i;return function(e,n){return n?e:void 0!==e?e=Math.floor(e/s+.5)*s:void 0}}(e):X}return yt}(e);this.constraints_={center:r,resolution:a,rotation:l},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom),this.setProperties({}),this.options_=e},s.prototype.getUpdatedOptions_=function(e){var n=(0,N.f0)({},this.options_);return void 0!==n.resolution?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),(0,N.f0)({},n,e)},s.prototype.animate=function(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),o=0;o<n.length;++o){var r=arguments[o];r.center&&((r=(0,N.f0)({},r)).center=(0,m.Vs)(r.center,this.getProjection())),r.anchor&&((r=(0,N.f0)({},r)).anchor=(0,m.Vs)(r.anchor,this.getProjection())),n[o]=r}this.animateInternal.apply(this,n)},s.prototype.animateInternal=function(e){var o,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(o=arguments[n-1],--n),!this.isDef()){var r=arguments[n-1];return r.center&&this.setCenterInternal(r.center),void 0!==r.zoom&&this.setZoom(r.zoom),void 0!==r.rotation&&this.setRotation(r.rotation),void(o&&G(o,!0))}for(var a=Date.now(),l=this.targetCenter_.slice(),c=this.targetResolution_,u=this.targetRotation_,f=[],p=0;p<n;++p){var d=arguments[p],g={start:a,complete:!1,anchor:d.anchor,duration:void 0!==d.duration?d.duration:1e3,easing:d.easing||tt.rd,callback:o};if(d.center&&(g.sourceCenter=l,g.targetCenter=d.center.slice(),l=g.targetCenter),void 0!==d.zoom?(g.sourceResolution=c,g.targetResolution=this.getResolutionForZoom(d.zoom),c=g.targetResolution):d.resolution&&(g.sourceResolution=c,g.targetResolution=d.resolution,c=g.targetResolution),void 0!==d.rotation){g.sourceRotation=u;var Z=(0,_.$W)(d.rotation-u+Math.PI,2*Math.PI)-Math.PI;g.targetRotation=u+Z,u=g.targetRotation}Mt(g)?g.complete=!0:a+=g.duration,f.push(g)}this.animations_.push(f),this.setHint(O.Z.ANIMATING,1),this.updateAnimations_()},s.prototype.getAnimating=function(){return this.hints_[O.Z.ANIMATING]>0},s.prototype.getInteracting=function(){return this.hints_[O.Z.INTERACTING]>0},s.prototype.cancelAnimations=function(){this.setHint(O.Z.ANIMATING,-this.hints_[O.Z.ANIMATING]);for(var e,n=0,o=this.animations_.length;n<o;++n){var r=this.animations_[n];if(r[0].callback&&G(r[0].callback,!1),!e)for(var a=0,l=r.length;a<l;++a){var c=r[a];if(!c.complete){e=c.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e},s.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var e=Date.now(),n=!1,o=this.animations_.length-1;o>=0;--o){for(var r=this.animations_[o],a=!0,l=0,c=r.length;l<c;++l){var u=r[l];if(!u.complete){var p=u.duration>0?(e-u.start)/u.duration:1;p>=1?(u.complete=!0,p=1):a=!1;var d=u.easing(p);if(u.sourceCenter){var g=u.sourceCenter[0],Z=u.sourceCenter[1];this.targetCenter_=[g+d*(u.targetCenter[0]-g),Z+d*(u.targetCenter[1]-Z)]}if(u.sourceResolution&&u.targetResolution){var S=1===d?u.targetResolution:u.sourceResolution+d*(u.targetResolution-u.sourceResolution);if(u.anchor){var j=this.getViewportSize_(this.getRotation()),D=this.constraints_.resolution(S,0,j,!0);this.targetCenter_=this.calculateCenterZoom(D,u.anchor)}this.targetResolution_=S,this.applyTargetState_(!0)}if(void 0!==u.sourceRotation&&void 0!==u.targetRotation){var R=1===d?(0,_.$W)(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+d*(u.targetRotation-u.sourceRotation);if(u.anchor){var k=this.constraints_.rotation(R,!0);this.targetCenter_=this.calculateCenterRotate(k,u.anchor)}this.targetRotation_=R}if(this.applyTargetState_(!0),n=!0,!u.complete)break}}if(a){this.animations_[o]=null,this.setHint(O.Z.ANIMATING,-1);var x=r[0].callback;x&&G(x,!0)}}this.animations_=this.animations_.filter(Boolean),n&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},s.prototype.calculateCenterRotate=function(e,n){var o,r=this.getCenterInternal();return void 0!==r&&((0,U.U1)(o=[r[0]-n[0],r[1]-n[1]],e-this.getRotation()),(0,U.IH)(o,n)),o},s.prototype.calculateCenterZoom=function(e,n){var o,r=this.getCenterInternal(),a=this.getResolution();return void 0!==r&&void 0!==a&&(o=[n[0]-e*(n[0]-r[0])/a,n[1]-e*(n[1]-r[1])/a]),o},s.prototype.getViewportSize_=function(e){var n=this.viewportSize_;if(e){var o=n[0],r=n[1];return[Math.abs(o*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(o*Math.sin(e))+Math.abs(r*Math.cos(e))]}return n},s.prototype.setViewportSize=function(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},s.prototype.getCenter=function(){var e=this.getCenterInternal();return e&&(0,m.lO)(e,this.getProjection())},s.prototype.getCenterInternal=function(){return this.get("center")},s.prototype.getConstraints=function(){return this.constraints_},s.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},s.prototype.getHints=function(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()},s.prototype.calculateExtent=function(e){var n=this.calculateExtentInternal(e);return(0,m.Fj)(n,this.getProjection())},s.prototype.calculateExtentInternal=function(e){var n=e||this.getViewportSize_(),o=this.getCenterInternal();(0,E.h)(o,1);var r=this.getResolution();(0,E.h)(void 0!==r,2);var a=this.getRotation();return(0,E.h)(void 0!==a,3),(0,I.p8)(o,r,a,n)},s.prototype.getMaxResolution=function(){return this.maxResolution_},s.prototype.getMinResolution=function(){return this.minResolution_},s.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},s.prototype.setMaxZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))},s.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},s.prototype.setMinZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))},s.prototype.setConstrainResolution=function(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))},s.prototype.getProjection=function(){return this.projection_},s.prototype.getResolution=function(){return this.get("resolution")},s.prototype.getResolutions=function(){return this.resolutions_},s.prototype.getResolutionForExtent=function(e,n){return this.getResolutionForExtentInternal((0,m.dY)(e,this.getProjection()),n)},s.prototype.getResolutionForExtentInternal=function(e,n){var o=n||this.getViewportSize_(),r=(0,I.dz)(e)/o[0],a=(0,I.Cr)(e)/o[1];return Math.max(r,a)},s.prototype.getResolutionForValueFunction=function(e){var n=e||2,o=this.getConstrainedResolution(this.maxResolution_),a=Math.log(o/this.minResolution_)/Math.log(n);return function(l){return o/Math.pow(n,l*a)}},s.prototype.getRotation=function(){return this.get("rotation")},s.prototype.getValueForResolutionFunction=function(e){var n=Math.log(e||2),o=this.getConstrainedResolution(this.maxResolution_),a=Math.log(o/this.minResolution_)/n;return function(l){return Math.log(o/l)/n/a}},s.prototype.getState=function(){var e=this.getCenterInternal(),n=this.getProjection(),o=this.getResolution(),r=this.getRotation();return{center:e.slice(0),projection:void 0!==n?n:null,resolution:o,rotation:r,zoom:this.getZoom()}},s.prototype.getZoom=function(){var e,n=this.getResolution();return void 0!==n&&(e=this.getZoomForResolution(n)),e},s.prototype.getZoomForResolution=function(e){var o,r,n=this.minZoom_||0;if(this.resolutions_){var a=(0,B.h7)(this.resolutions_,e,1);n=a,o=this.resolutions_[a],r=a==this.resolutions_.length-1?2:o/this.resolutions_[a+1]}else o=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(o/e)/Math.log(r)},s.prototype.getResolutionForZoom=function(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=(0,_.uZ)(Math.floor(e),0,this.resolutions_.length-2);return this.resolutions_[n]/Math.pow(this.resolutions_[n]/this.resolutions_[n+1],(0,_.uZ)(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)},s.prototype.fit=function(e,n){var r,o=(0,N.f0)({size:this.getViewportSize_()},n||{});if((0,E.h)(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,24),Array.isArray(e)){(0,E.h)(!(0,I.xb)(e),25);var a=(0,m.dY)(e,this.getProjection());r=(0,q.oJ)(a)}else if(e.getType()===dt.Z.CIRCLE)a=(0,m.dY)(e.getExtent(),this.getProjection()),(r=(0,q.oJ)(a)).rotate(this.getRotation(),(0,I.qg)(a));else{var l=(0,m.Cs)();r=l?e.clone().transform(l,this.getProjection()):e}this.fitInternal(r,o)},s.prototype.fitInternal=function(e,n){var o=n||{},r=o.size;r||(r=this.getViewportSize_());var c,a=void 0!==o.padding?o.padding:[0,0,0,0],l=void 0!==o.nearest&&o.nearest;c=void 0!==o.minResolution?o.minResolution:void 0!==o.maxZoom?this.getResolutionForZoom(o.maxZoom):0;for(var u=e.getFlatCoordinates(),f=this.getRotation(),p=Math.cos(-f),d=Math.sin(-f),g=1/0,Z=1/0,v=-1/0,T=-1/0,b=e.getStride(),C=0,S=u.length;C<S;C+=b){var j=u[C]*p-u[C+1]*d,D=u[C]*d+u[C+1]*p;g=Math.min(g,j),Z=Math.min(Z,D),v=Math.max(v,j),T=Math.max(T,D)}var R=this.getResolutionForExtentInternal([g,Z,v,T],[r[0]-a[1]-a[3],r[1]-a[0]-a[2]]);R=isNaN(R)?c:Math.max(R,c),R=this.getConstrainedResolution(R,l?0:1);var k=(g+v)/2,x=(Z+T)/2,it=[(k+=(a[1]-a[3])/2*R)*p-(x+=(a[0]-a[2])/2*R)*(d=-d),x*p+k*d],st=o.callback?o.callback:pt.Zn;void 0!==o.duration?this.animateInternal({resolution:R,center:this.getConstrainedCenter(it,R),duration:o.duration,easing:o.easing},st):(this.targetResolution_=R,this.targetCenter_=it,this.applyTargetState_(!1,!0),G(st,!0))},s.prototype.centerOn=function(e,n,o){this.centerOnInternal((0,m.Vs)(e,this.getProjection()),n,o)},s.prototype.centerOnInternal=function(e,n,o){var r=this.getRotation(),a=Math.cos(-r),l=Math.sin(-r),c=e[0]*a-e[1]*l,u=e[1]*a+e[0]*l,f=this.getResolution();this.setCenterInternal([(c+=(n[0]/2-o[0])*f)*a-(u+=(o[1]-n[1]/2)*f)*(l=-l),u*a+c*l])},s.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},s.prototype.adjustCenter=function(e){var n=(0,m.lO)(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])},s.prototype.adjustCenterInternal=function(e){var n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])},s.prototype.adjustResolution=function(e,n){var o=n&&(0,m.Vs)(n,this.getProjection());this.adjustResolutionInternal(e,o)},s.prototype.adjustResolutionInternal=function(e,n){var o=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*e,0,r,o);n&&(this.targetCenter_=this.calculateCenterZoom(a,n)),this.targetResolution_*=e,this.applyTargetState_()},s.prototype.adjustZoom=function(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)},s.prototype.adjustRotation=function(e,n){n&&(n=(0,m.Vs)(n,this.getProjection())),this.adjustRotationInternal(e,n)},s.prototype.adjustRotationInternal=function(e,n){var o=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,o);n&&(this.targetCenter_=this.calculateCenterRotate(r,n)),this.targetRotation_+=e,this.applyTargetState_()},s.prototype.setCenter=function(e){this.setCenterInternal((0,m.Vs)(e,this.getProjection()))},s.prototype.setCenterInternal=function(e){this.targetCenter_=e,this.applyTargetState_()},s.prototype.setHint=function(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]},s.prototype.setResolution=function(e){this.targetResolution_=e,this.applyTargetState_()},s.prototype.setRotation=function(e){this.targetRotation_=e,this.applyTargetState_()},s.prototype.setZoom=function(e){this.setResolution(this.getResolutionForZoom(e))},s.prototype.applyTargetState_=function(e,n){var o=this.getAnimating()||this.getInteracting()||n,r=this.constraints_.rotation(this.targetRotation_,o),a=this.getViewportSize_(r),l=this.constraints_.resolution(this.targetResolution_,0,a,o),c=this.constraints_.center(this.targetCenter_,l,a,o);this.get("rotation")!==r&&this.set("rotation",r),this.get("resolution")!==l&&this.set("resolution",l),(!this.get("center")||!(0,U.fS)(this.get("center"),c))&&this.set("center",c),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0},s.prototype.resolveConstraints=function(e,n,o){var r=void 0!==e?e:200,a=n||0,l=this.constraints_.rotation(this.targetRotation_),c=this.getViewportSize_(l),u=this.constraints_.resolution(this.targetResolution_,a,c),f=this.constraints_.center(this.targetCenter_,u,c);if(0===r&&!this.cancelAnchor_)return this.targetResolution_=u,this.targetRotation_=l,this.targetCenter_=f,void this.applyTargetState_();var p=o||(0===r?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==u||this.getRotation()!==l||!this.getCenterInternal()||!(0,U.fS)(this.getCenterInternal(),f))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:f,resolution:u,duration:r,easing:tt.Vv,anchor:p}))},s.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(O.Z.INTERACTING,1)},s.prototype.endInteraction=function(e,n,o){var r=o&&(0,m.Vs)(o,this.getProjection());this.endInteractionInternal(e,n,r)},s.prototype.endInteractionInternal=function(e,n,o){this.setHint(O.Z.INTERACTING,-1),this.resolveConstraints(e,n,o)},s.prototype.getConstrainedCenter=function(e,n){var o=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),o)},s.prototype.getConstrainedZoom=function(e,n){var o=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(o,n))},s.prototype.getConstrainedResolution=function(e,n){var o=n||0,r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,o,r)},s}(L.ZP);function G(i,s){setTimeout(function(){i(s)},0)}function Mt(i){return!(i.sourceCenter&&i.targetCenter&&!(0,U.fS)(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}const Ot=_t;var et=h(2729),St=h(9500),Ft=h(2933),bt=h(5789),Pt=h(7039),Ut=h(4979),Nt=h(6311),xt=h(5285),Et=h(8686),kt=h(2827),Lt=h(2642),Y=h(520),F=h(9808),Gt=h(5726),jt=h(4221),Q=h(18);const Dt=["infoModal"];function qt(i,s){1&i&&(t.TgZ(0,"div",38),t._uU(1," The 'Name' field could not start with space. "),t.qZA())}function Vt(i,s){if(1&i&&(t.TgZ(0,"option",39),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.s9C("value",e),t.xp6(1),t.Oqu(e)}}let nt=(()=>{class i{constructor(e,n){this.http=e,this.route=n,this.submitted=!1,this.statusDates=[],this.startTime=0,this.clicked=!1,this.AAF=new y.cw({name:new y.NI("",[y.kI.required,y.kI.pattern(Lt.S.regex.noSpace)]),dsc:new y.NI("",[y.kI.maxLength(250)]),x:new y.NI(null,[y.kI.required]),y:new y.NI(null,[y.kI.required]),status:new y.NI("",[y.kI.required])})}getFormValues(){return this.AAF.value}setFormValue(){this.AAF.get("name").setValue(this.asset.name),this.AAF.get("dsc").setValue(this.asset.dsc),this.AAF.get("status").setValue(this.asset.status),this.asset.point&&(0===this.asset.point.coordinates[0]?this.continueInfo():(this.AAF.get("x").setValue(this.asset.point.coordinates[0]),this.AAF.get("y").setValue(this.asset.point.coordinates[1]),this.addPoint()))}mouseDown(e){this.x=e.clientX,this.y=e.clientY}mouseUp(e){this.startTime=0;const n=setInterval(()=>{this.startTime+=1,this.startTime>3&&clearInterval(n)},100),o=setTimeout(()=>{this.x===e.clientX&&this.y===e.clientY&&2===this.startTime&&(clearInterval(n),this.getPosition(),this.startTime=0)},200);setTimeout(()=>{this.startTime>1&&clearTimeout(o)},100)}getPosition(){this.map.addLayer(new ol.layer.Tile({source:new ol.source.OSM})),this.coordinate=document.getElementById("mouse-position").innerText.split(", "),this.vectorLayer=new ol.layer.Vector({source:new ol.source.Vector({features:[new ol.Feature({geometry:new ol.geom.Point(ol.proj.transform([this.coordinate[0],this.coordinate[1]],"EPSG:4326","EPSG:3857"),"XY")})]}),style:new ol.style.Style({image:new ol.style.Icon({anchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",src:"assets/img/avatars/asset-icon.png"}),text:new ol.style.Text({text:this.AAF.get("name").value,font:"12px Calibri,sans-serif",offsetY:2,fill:new ol.style.Fill({color:"#black"}),stroke:new ol.style.Stroke({color:"#fff",width:2})})})}),this.map.addLayer(this.vectorLayer),this.AAF.get("y").setValue(this.coordinate[0]),this.AAF.get("x").setValue(this.coordinate[1])}setCurrentLoc(){this.infoModal.show()}continueInfo(){let e=new Ot({center:[0,0],zoom:2});this.geoLocation=new ht({trackingOptions:{enableHighAccuracy:!0},projection:e.getProjection()}),this.geoLocation.setTracking(!0);const n=new et.Z;this.geoLocation.on("change:accuracyGeometry",()=>{n.setGeometry(this.geoLocation.getAccuracyGeometry())});const o=new et.Z;o.setStyle(new St.ZP({image:new Ft.Z({radius:6,fill:new bt.Z({color:"#3399CC"}),stroke:new Pt.Z({color:"#fff",width:2})})})),this.geoLocation.on("change:position",r=>{const a=this.geoLocation.getPosition();o.setGeometry(a?new Ut.Z(a):null),this.AAF.get("y").setValue(r.target.position_[0]),this.AAF.get("x").setValue(r.target.position_[1]),e=this.map.getView(),e.setCenter(ol.proj.fromLonLat([this.AAF.get("y").value,this.AAF.get("x").value])),e.setZoom(12)}),new Nt.Z({map:this.map,source:new xt.Z({features:[n,o]})}),this.infoModal.hide()}addPoint(){this.vectorLayer=new ol.layer.Vector({source:new ol.source.Vector({features:[new ol.Feature({geometry:new ol.geom.Point(ol.proj.transform([this.AAF.get("y").value,this.AAF.get("x").value],"EPSG:4326","EPSG:3857"),"XY")})]}),style:new ol.style.Style({image:new ol.style.Icon({anchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",src:"assets/img/avatars/asset-icon.png"}),text:new ol.style.Text({text:this.AAF.get("name").value,font:"12px Calibri,sans-serif",offsetY:2,fill:new ol.style.Fill({color:"#black"}),stroke:new ol.style.Stroke({color:"#fff",width:2})})})}),this.map.addLayer(this.vectorLayer);const e=this.map.getView();e.setCenter(ol.proj.fromLonLat([this.AAF.get("y").value,this.AAF.get("x").value])),e.setZoom(12)}ngOnInit(){setTimeout(()=>{this.mousePositionControl=new Et.Z({coordinateFormat:(0,U.Fj)(4),projection:"EPSG:4326",target:document.getElementById("mouse-position"),className:"custom-mouse-position",undefinedHTML:"&nbsp;"}),this.map=new ol.Map({controls:(0,kt.ce)().extend([this.mousePositionControl]),target:"map",layers:[new ol.layer.Tile({source:new ol.source.OSM})],view:new ol.View({center:ol.proj.fromLonLat([0,0]),zoom:2})}),this.setFormValue()},300),this.assetId=+this.route.snapshot.paramMap.get("assetId"),this.http.get(P.A.httpUrl.resource_server+"/assigned-asset/"+this.assetId).subscribe(e=>{this.asset=e}),this.http.get(P.A.httpUrl.resource_server+"/asset-model/status").subscribe(e=>{this.statusDates=e})}ngOnDestroy(){this.geoLocation&&this.geoLocation.setTracking(!1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y.eN),t.Y36(M.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-own-asset-form"]],viewQuery:function(e,n){if(1&e&&t.Gf(Dt,5),2&e){let o;t.iGM(o=t.CRH())&&(n.infoModal=o.first)}},decls:56,vars:17,consts:[[3,"formGroup"],["id","map",2,"width","100%","height","calc(100vh - 220px)",3,"mousedown","mouseup"],["id","mouse-position"],[1,"card-body"],[1,"form-group"],["for","name"],["id","name","type","text","formControlName","name",1,"form-control",3,"ngClass"],[1,"invalid-feedback",3,"field","name"],["class","invalid-feedback",4,"ngIf"],["for","dsc"],["id","dsc","name","description","rows","5","formControlName","dsc",1,"form-control",3,"ngClass"],[1,"invalid-feedback",3,"field"],[1,"row"],[1,"form-group","col-sm-3"],["for","x"],["id","x","type","number","formControlName","x",1,"form-control",3,"ngClass"],["for","y"],["id","y","type","number","formControlName","y",1,"form-control",3,"ngClass"],[1,"form-group","col-sm-12","col-xl-3","my-auto"],["title","Set Current Location",1,"btn","ml-3","btn-primary",3,"click"],[1,"cui-location-pin"],[1,"form-group","col-sm-12"],["for","status"],["id","status","formControlName","status",1,"form-control",3,"ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel",1,"modal","fade"],["infoModal","bs-modal"],["role","document",1,"modal-dialog","modal-info"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-info",3,"click"],[1,"invalid-feedback"],[3,"value"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.NdJ("mousedown",function(a){return n.mouseDown(a)})("mouseup",function(a){return n.mouseUp(a)}),t.qZA(),t._UZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"label",5),t._uU(6,"Name"),t.qZA(),t._UZ(7,"input",6),t._UZ(8,"app-required-validator",7),t.YNc(9,qt,2,0,"div",8),t.qZA(),t.TgZ(10,"div",4),t.TgZ(11,"label",9),t._uU(12,"Description"),t.qZA(),t._UZ(13,"textarea",10),t._UZ(14,"app-max-length-validator",11),t.qZA(),t.TgZ(15,"div",12),t.TgZ(16,"div",13),t.TgZ(17,"label",14),t._uU(18,"Latitude"),t.qZA(),t._UZ(19,"input",15),t._UZ(20,"app-required-validator",7),t.qZA(),t.TgZ(21,"div",13),t.TgZ(22,"label",16),t._uU(23,"Longitude"),t.qZA(),t._UZ(24,"input",17),t._UZ(25,"app-required-validator",7),t.qZA(),t.TgZ(26,"div",18),t.TgZ(27,"button",19),t.NdJ("click",function(){return n.setCurrentLoc()}),t._UZ(28,"i",20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",12),t.TgZ(30,"div",21),t.TgZ(31,"label",22),t._uU(32,"Status"),t.qZA(),t.TgZ(33,"select",23),t.TgZ(34,"option",24),t._uU(35,"Please select status"),t.qZA(),t.YNc(36,Vt,2,2,"option",25),t.qZA(),t._UZ(37,"app-required-validator",7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",26,27),t.TgZ(40,"div",28),t.TgZ(41,"div",29),t.TgZ(42,"div",30),t.TgZ(43,"h4",31),t._uU(44,"Important"),t.qZA(),t.TgZ(45,"button",32),t.NdJ("click",function(){return t.CHM(o),t.MAs(39).hide()}),t.TgZ(46,"span",33),t._uU(47,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"div",34),t.TgZ(49,"p"),t._uU(50,"Do you want to determine your current location and set latitude and longitude values? "),t.qZA(),t.qZA(),t.TgZ(51,"div",35),t.TgZ(52,"button",36),t.NdJ("click",function(){return t.CHM(o),t.MAs(39).hide()}),t._uU(53,"Cancel "),t.qZA(),t.TgZ(54,"button",37),t.NdJ("click",function(){return n.continueInfo()}),t._uU(55,"Ok"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.Q6J("formGroup",n.AAF),t.xp6(7),t.Q6J("ngClass",n.submitted||n.AAF.get("name").touched?n.AAF.get("name").invalid?"is-invalid ":"is-valid":""),t.xp6(1),t.Q6J("field",n.AAF.get("name"))("name","Name"),t.xp6(1),t.Q6J("ngIf",(n.submitted||n.AAF.get("name").touched)&&n.AAF.get("name").invalid&&n.AAF.get("name").getError("pattern")),t.xp6(4),t.Q6J("ngClass",n.submitted||n.AAF.get("dsc").touched?n.AAF.get("dsc").invalid?"is-invalid ":"is-valid":""),t.xp6(1),t.Q6J("field",n.AAF.get("dsc")),t.xp6(5),t.Q6J("ngClass",n.submitted||n.AAF.get("x").touched?n.AAF.get("x").invalid?"is-invalid ":"is-valid":""),t.xp6(1),t.Q6J("field",n.AAF.get("x"))("name","Latitude"),t.xp6(4),t.Q6J("ngClass",n.submitted||n.AAF.get("y").touched?n.AAF.get("y").invalid?"is-invalid ":"is-valid":""),t.xp6(1),t.Q6J("field",n.AAF.get("y"))("name","Longitude"),t.xp6(8),t.Q6J("ngClass",n.submitted||n.AAF.get("status").touched?n.AAF.get("status").invalid?"is-invalid ":"is-valid":""),t.xp6(3),t.Q6J("ngForOf",n.statusDates),t.xp6(1),t.Q6J("field",n.AAF.get("status"))("name","Status"))},directives:[y._Y,y.JL,y.sg,y.Fj,y.JJ,y.u,F.mk,Gt.r,F.O5,jt.f,y.wV,y.EJ,y.YN,y.Kr,F.sg,Q.oB],styles:[".my-drop-zone[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.my-drop-zone[_ngcontent-%COMP%]   .file_input_parent[_ngcontent-%COMP%]{overflow:hidden;position:relative;cursor:pointer}.my-drop-zone[_ngcontent-%COMP%]   .file_input_parent[_ngcontent-%COMP%]   .input_file[_ngcontent-%COMP%]{display:none}"]}),i})();var ot=h(8248);let Jt=(()=>{class i{constructor(e,n,o,r){this.http=e,this.router=n,this.route=o,this.alertMessageService=r}ngOnInit(){}setUp(){if(this.OAForm.submitted=!0,this.OAForm.AAF.valid){const e=this.OAForm.getFormValues();e.id=this.OAForm.assetId,console.log(e,"formValue 222"),this.http.patch(P.A.httpUrl.resource_server+"/assigned-asset",e).subscribe(()=>{this.alertMessageService.addSuccessMessage("The asset is successfully setup."),this.router.navigate(["/aya/own-asset/list"])},n=>{this.alertMessageService.addDangerMessage(n.error.message)})}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y.eN),t.Y36(M.F0),t.Y36(M.gz),t.Y36(ot.O))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit-own-asset"]],viewQuery:function(e,n){if(1&e&&t.Gf(nt,7),2&e){let o;t.iGM(o=t.CRH())&&(n.OAForm=o.first)}},decls:12,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"card-footer"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-pencil"],["routerLink","../../",1,"btn","btn-sm","btn-danger","mx-1"],[1,"cui-arrow-left"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"strong"),t._uU(3,"Setup Asset"),t.qZA(),t.qZA(),t._UZ(4,"app-own-asset-form"),t.TgZ(5,"div",2),t.TgZ(6,"button",3),t.NdJ("click",function(){return n.setUp()}),t._UZ(7,"i",4),t._uU(8,"Setup"),t.qZA(),t.TgZ(9,"a",5),t.TgZ(10,"i",6),t._uU(11," Cancel"),t.qZA(),t.qZA(),t.qZA(),t.qZA())},directives:[nt,M.yS],styles:[""]}),i})();var zt=h(7830),Yt=h(1038),Qt=h(4841),Ht=h(8315),Kt=h(9679);const Wt=["confirmAssignModal"],Bt=["dangerModal"];function $t(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"a",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().returnAsset("","")}),t._UZ(1,"i",30),t._uU(2," Return Assets"),t.qZA()}}function Xt(i,s){if(1&i&&(t.TgZ(0,"span",48),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij("Longitude ",null==e.point?null:e.point.coordinates[1],"")}}function te(i,s){if(1&i&&(t.TgZ(0,"span",46),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.YNc(3,Xt,2,1,"span",47),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.hij("Latitude ",null==e.point?null:e.point.coordinates[0],""),t.xp6(1),t.Q6J("ngIf",e.point)}}const ee=function(i){return{color:i}},ne=function(i){return["../",i,"setup"]};function oe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr",31),t.TgZ(1,"td"),t.TgZ(2,"div",32),t.TgZ(3,"input",33),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().addRemoveAsset(r.id,r.asset.assetModel.assetModelType)}),t.qZA(),t._UZ(4,"label",34),t.qZA(),t.qZA(),t.TgZ(5,"td",35),t._uU(6),t.qZA(),t.TgZ(7,"td",35),t._uU(8),t.qZA(),t.TgZ(9,"td",36),t.YNc(10,te,4,2,"span",37),t.qZA(),t.TgZ(11,"td",38),t.TgZ(12,"span",39),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"td",40),t._uU(15),t.qZA(),t.TgZ(16,"td",41),t.TgZ(17,"a",42),t.TgZ(18,"span",43),t._UZ(19,"i",44),t.qZA(),t.qZA(),t.TgZ(20,"button",45),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().returnAsset(r.id,r.asset.assetModel.assetModelType)}),t._UZ(21,"i",30),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=s.$implicit,n=t.oxw();t.xp6(3),t.s9C("id",e.name),t.Q6J("checked",n.checkCheckedAsset(e.id)),t.xp6(1),t.s9C("for",e.name),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.dsc),t.xp6(2),t.Q6J("ngIf",e.point),t.xp6(2),t.ekj("badge-success","ENABLE"===e.status)("badge-danger","DISABLE"===e.status),t.xp6(1),t.hij(" ",e.status," "),t.xp6(1),t.Q6J("ngStyle",t.VKq(14,ee,"NOT_ATTACHED"!==e.attachedStatus?"#4dbd74":"#f86c6b")),t.xp6(1),t.hij(" ","NOT_ATTACHED"!==e.attachedStatus?"\u2713":"\u2715"," "),t.xp6(2),t.Q6J("routerLink",t.VKq(16,ne,e.id))}}function ie(i,s){1&i&&(t.TgZ(0,"span"),t._uU(1,"Do you want to return an asset?"),t.qZA())}function se(i,s){1&i&&(t.TgZ(0,"span"),t._uU(1,"Do you want to return assets?"),t.qZA())}function re(i,s){1&i&&(t.TgZ(0,"span"),t._uU(1,"All the assets attached to the gateway will be detached. Do you want to return it?"),t.qZA())}function ae(i,s){1&i&&(t.TgZ(0,"span"),t._uU(1,"All the assets attached to the gateways will be detached. Do you want to return them?"),t.qZA())}const ue=function(){return{key:"all",name:"Select",width:"38px",sortable:!1,checkAll:!0}},le=function(){return{key:"name",name:"Name",sortable:!0,minWidth:"80px",searchKey:"name",searchInput:!0}},ce=function(){return{key:"dsc",name:"Description",searchKey:"dsc",sortable:!0,minWidth:"115px",searchInput:!0}},he=function(){return{name:"Latitude",key:"latitude",title:"Latitude",type:"number",value:0}},de=function(){return{name:"Longitude",key:"longitude",title:"Longitude",type:"number",value:0}},ge=function(i,s){return[i,s]},fe=function(i){return{key:"point",name:"Point",sortable:!1,searchKey:"point",width:"572px",searchInput:!1,otherFieldMap:i}},pe=function(i){return{key:"status",name:"Status",sortable:!0,searchKey:"status",minWidth:"80px",searchInput:!0,type:"select",selectData:i}},me=function(i){return{key:"attachedStatus",name:"Attached Status",sortable:!1,searchKey:"attachedStatus",minWidth:"80px",searchInput:!1,type:"select",selectData:i}},ve=function(){return{key:"action",name:"Action",width:"38px",sortable:!1}},Ae=function(i,s,e,n,o,r,a){return[i,s,e,n,o,r,a]},ye=[{path:"",redirectTo:"list"},{path:"",component:rt,children:[{path:"list",component:(()=>{class i{constructor(e,n,o){this.http=e,this.alertMessageService=n,this.paginateService=o,this.statusDates=[],this.assetsDates=[],this.attachedAssetsToGateway=!1,this.getGatewayForGroup=[],this.returnToPartitionAsset=[],this.checkAllCheckedStatus$=!1,this.searchData={},this.paginateService.sessionPrefix="OWN_ASSET_LIST"}get getPaginateService(){return this.paginateService}checkAll(e){this.checkAllCheckedStatus$=e;const n=this.getPaginateService.paginateResult[this.getPaginateService.page];for(const o in n)n.hasOwnProperty(o)&&(this.checkCheckedAsset(n[o].id)&&!e&&this.addRemoveAsset(n[o].id,n[o].asset.assetModel.assetModelType),!this.checkCheckedAsset(n[o].id)&&e&&this.addRemoveAsset(n[o].id,n[o].asset.assetModel.assetModelType))}checkCheckedAsset(e){for(let n=0;n<this.returnToPartitionAsset.length;n++)if(this.returnToPartitionAsset[n]===e)return!0}addRemoveAsset(e,n){let o=!0;for(let r=0;r<this.returnToPartitionAsset.length;r++)if(this.returnToPartitionAsset[r]===e){if(o=!1,this.returnToPartitionAsset.splice(r,1),"GATEWAY"===n)for(let a=0;a<this.getGatewayForGroup.length;a++)this.getGatewayForGroup.splice(a,1);break}o&&(this.returnToPartitionAsset.push(e),"GATEWAY"===n&&this.getGatewayForGroup.push(e))}returnAsset(e,n){"GATEWAY"===n||this.getGatewayForGroup.length>0?(this.attachedAssetsToGateway=!0,this.dangerModal.show()):this.dangerModal.show(),this.returnId=e}ngOnInit(){this.paginateService.restartPaginate(),this.http.get(P.A.httpUrl.resource_server+"/asset-model/status").subscribe(e=>{this.statusDates.push({id:null,name:"All"});for(let n=0;n<e.length;n++)this.statusDates.push({id:e[n],name:e[n]})},e=>{404===e.status&&this.alertMessageService.addDangerMessage(e.error.message)}),this.subscription=this.paginateService.getResult.subscribe(e=>this.getResult(e))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}close(){this.dangerModal.hide(),setTimeout(()=>{this.attachedAssetsToGateway=!1},150)}continue(){const e={assignedAssetIdList:[this.returnId]};!this.returnId&&this.returnToPartitionAsset&&(e.assignedAssetIdList=this.returnToPartitionAsset),this.http.post(P.A.httpUrl.resource_server+"/assigned-asset/give-back-asset",e).subscribe(n=>{this.alertMessageService.addSuccessMessage(n.message,5e3),this.returnToPartitionAsset=[],this.refreshAll(),this.checkAllCheckedStatus$=!1,this.attachedAssetsToGateway=!1},n=>{this.alertMessageService.addDangerMessage(n.error.message)}),this.dangerModal.hide()}refreshAll(){this.paginateService.setEmptyPaginateResult(),this.getResult()}getResult(e){if(this.paginateService.checkPageEmpty()){(0,zt.K)(e)&&(this.searchData=e);const n="?"+this.paginateService.getRequestParamsFromObject(this.searchData);this.http.get(P.A.httpUrl.resource_server+"/assigned-asset/by-partition-id"+n).subscribe(o=>{this.paginateService.allRecordCount=o.totalElements,this.paginateService.calculatePaginate(o.content)},o=>{404===o.status&&this.alertMessageService.addDangerMessage(o.error.message)})}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y.eN),t.Y36(ot.O),t.Y36(Yt.r))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-list-own-asset"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Wt,7),t.Gf(Bt,5)),2&e){let o;t.iGM(o=t.CRH())&&(n.confirmAssignModal=o.first),t.iGM(o=t.CRH())&&(n.dangerModal=o.first)}},decls:43,vars:31,consts:[["id","ui-view"],[1,"animated","fadeIn"],[1,"card"],[1,"card-header"],[1,"fa","fa-edit"],[1,"float-right","m-0"],["title","Return Assets","href","javascript:void(0)","class","mx-3 px-4 py-1 btn-danger text-white",3,"click",4,"ngIf"],["href","javascript:void(0)","title","refresh",1,"ml-4",3,"click"],["aria-hidden","true",1,"fa","fa-refresh"],[1,"card-body"],["id","DataTables_Table_0_wrapper",1,"dataTables_wrapper","dt-bootstrap4","no-footer"],[1,"row"],[1,"col-sm-12","col-md-6"],[1,"col-sm-12","table-parent"],[3,"headerParams","checkAllCheckedStatus","checkAll"],["class","odd",4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["title","Return Assets","href","javascript:void(0)",1,"mx-3","px-4","py-1","btn-danger","text-white",3,"click"],[1,"cui-action-undo"],[1,"odd"],[1,"text-center","custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",2,"cursor","pointer",3,"id","checked","click"],[1,"custom-control-label",3,"for"],[1,""],[1,"align-middle"],["class","ml-2 align-middle",4,"ngIf"],[1,"text-center"],[1,"badge"],[1,"text-center","align-middle",2,"font-weight","600",3,"ngStyle"],[1,"edit"],["title","Setup",3,"routerLink"],[1,"btn","btn-info"],[1,"icon-wrench","icons"],["title","Return",1,"btn","ml-3","btn-danger",3,"click"],[1,"ml-2","align-middle"],["class","ml-3",4,"ngIf"],[1,"ml-3"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div"),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t._UZ(5,"i",4),t._uU(6," Own Asset "),t.TgZ(7,"p",5),t.YNc(8,$t,3,0,"a",6),t.TgZ(9,"a",7),t.NdJ("click",function(){return n.refreshAll()}),t._UZ(10,"i",8),t._uU(11," Reload "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",9),t.TgZ(13,"div",10),t.TgZ(14,"div",11),t._UZ(15,"app-paginate-show-count",12),t.qZA(),t.TgZ(16,"div",11),t.TgZ(17,"div",13),t.TgZ(18,"app-sortable-table-header",14),t.NdJ("checkAll",function(r){return n.checkAll(r)}),t.TgZ(19,"tbody"),t.YNc(20,oe,22,18,"tr",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(21,"app-paginate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",16,17),t.TgZ(24,"div",18),t.TgZ(25,"div",19),t.TgZ(26,"div",20),t.TgZ(27,"h4",21),t._uU(28,"Warning"),t.qZA(),t.TgZ(29,"button",22),t.NdJ("click",function(){return n.close()}),t.TgZ(30,"span",23),t._uU(31,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",24),t.TgZ(33,"p"),t.YNc(34,ie,2,0,"span",25),t.YNc(35,se,2,0,"span",25),t.YNc(36,re,2,0,"span",25),t.YNc(37,ae,2,0,"span",25),t.qZA(),t.qZA(),t.TgZ(38,"div",26),t.TgZ(39,"button",27),t.NdJ("click",function(){return n.close()}),t._uU(40,"Cancel "),t.qZA(),t.TgZ(41,"button",28),t.NdJ("click",function(){return n.continue()}),t._uU(42,"Continue anyway"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(8),t.Q6J("ngIf",n.returnToPartitionAsset.length>1),t.xp6(10),t.Q6J("headerParams",t.Hh0(23,Ae,t.DdM(8,ue),t.DdM(9,le),t.DdM(10,ce),t.VKq(16,fe,t.WLB(13,ge,t.DdM(11,he),t.DdM(12,de))),t.VKq(18,pe,n.statusDates),t.VKq(20,me,n.statusDates),t.DdM(22,ve)))("checkAllCheckedStatus",n.checkAllCheckedStatus$),t.xp6(2),t.Q6J("ngForOf",n.getPaginateService.paginateResult[n.getPaginateService.page]),t.xp6(14),t.Q6J("ngIf",n.returnId&&!n.attachedAssetsToGateway),t.xp6(1),t.Q6J("ngIf",!n.returnId&&!n.attachedAssetsToGateway),t.xp6(1),t.Q6J("ngIf",n.returnId&&n.attachedAssetsToGateway),t.xp6(1),t.Q6J("ngIf",!n.returnId&&n.attachedAssetsToGateway))},directives:[F.O5,Qt.S,Ht.X,F.sg,F.PC,M.yS,Kt.c,Q.oB],styles:[""]}),i})(),data:{browserTitle:"Own Asset List"}},{path:":assetId/setup",component:Jt,data:{title:"Setup",browserTitle:"Own Asset Setup"}}]}];let Ze=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[M.Bz.forChild(ye)],M.Bz]}),i})();var Te=h(3150),Ce=h(4466),_e=h(6217);let Re=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[F.ez,Ze,Ce.m,_e.n,Te.Ob,Q.zk.forRoot()]]}),i})()}}]);