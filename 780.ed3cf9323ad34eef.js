"use strict";(self.webpackChunkng=self.webpackChunkng||[]).push([[780],{6780:(mi,Y,u)=>{u.r(Y),u.d(Y,{AssetModelModule:()=>fi});var C=u(2252),i=u(5e3);let ke=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=i.Xpm({type:s,selectors:[["app-asset-model"]],decls:1,vars:0,template:function(e,n){1&e&&i._UZ(0,"router-outlet")},directives:[C.lC],encapsulation:2}),s})();var h=u(3075),v=u(9713),F=u(3150),xe=u(2642),$=u(7830),X=u(520),P=u(1038),ee=u(8248),Fe=u(2313),y=u(9808),Pe=u(5726),Oe=u(4221),Le=u(4918),Ne=u(4384),Ze=u(2478),te=u(4841),ie=u(8315),ne=u(9679);function Ue(s,t){if(1&s&&i._UZ(0,"img",55),2&s){const e=i.oxw();i.Q6J("src",e.filePreviewPath,i.LSH)}}function Ve(s,t){if(1&s&&i._UZ(0,"img",56),2&s){const e=i.oxw();i.Q6J("src",e.logoUrl+e.assetModelLog,i.LSH)("alt",e.assetModelLog)}}function Be(s,t){1&s&&i._UZ(0,"img",57)}function ze(s,t){if(1&s&&(i.TgZ(0,"span",58),i._uU(1),i.qZA()),2&s){const e=i.oxw();i.xp6(1),i.Oqu(null==e.selectedFiles?null:e.selectedFiles.name)}}function je(s,t){1&s&&(i.TgZ(0,"div",59),i._uU(1," Logo is required. "),i.qZA())}function He(s,t){if(1&s&&(i.TgZ(0,"div",59),i._uU(1),i.qZA()),2&s){const e=i.oxw();i.xp6(1),i.hij(" ",e.AMF.get("imageName").getError("file-max-size")," ")}}function qe(s,t){1&s&&(i.TgZ(0,"div",59),i._uU(1," The 'Name' field could not start with space. "),i.qZA())}function Ge(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"tr",60),i.TgZ(1,"td",61),i.TgZ(2,"div",62),i.TgZ(3,"input",63),i.NdJ("click",function(){const r=i.CHM(e).$implicit;return i.oxw().addRemoveCapability(r.id,r.communicationType)}),i.qZA(),i._UZ(4,"label",64),i.qZA(),i.qZA(),i.TgZ(5,"td",65),i._uU(6),i.qZA(),i.TgZ(7,"td",65),i._uU(8),i.qZA(),i.TgZ(9,"td",65),i._uU(10),i.qZA(),i.qZA()}if(2&s){const e=t.$implicit,n=i.oxw();i.xp6(3),i.s9C("id",e.id),i.Q6J("value",e.id)("checked",n.checkCheckedCapabilities(e.id)),i.xp6(1),i.s9C("for",e.id),i.xp6(2),i.Oqu(e.name),i.xp6(2),i.Oqu(e.capabilityType),i.xp6(2),i.Oqu(e.communicationType)}}function Ke(s,t){1&s&&(i.TgZ(0,"div",66),i._uU(1,"Selecting two and more of the capabilities is required."),i.qZA())}function We(s,t){1&s&&(i.TgZ(0,"div",66),i._uU(1,"One of the capabilities communication must have type 'LORA'."),i.qZA())}function Qe(s,t){1&s&&(i.TgZ(0,"div",66),i._uU(1,"You can only select one communication type 'LORA'."),i.qZA())}function Je(s,t){if(1&s&&(i.TgZ(0,"option",67),i._uU(1),i.qZA()),2&s){const e=t.$implicit;i.s9C("value",e),i.xp6(1),i.Oqu(e)}}function Ye(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"button",68),i.NdJ("click",function(){return i.CHM(e),i.oxw().addEditAssetModel()}),i._UZ(1,"i",69),i._uU(2," Add "),i.qZA()}}function $e(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"button",70),i.NdJ("click",function(){return i.CHM(e),i.oxw().addEditAssetModel()}),i._UZ(1,"i",71),i._uU(2," Edit "),i.qZA()}}function Xe(s,t){1&s&&(i.TgZ(0,"a",72),i.TgZ(1,"i",73),i._uU(2," Cancel"),i.qZA(),i.qZA())}function et(s,t){1&s&&(i.TgZ(0,"a",74),i.TgZ(1,"i",73),i._uU(2," Cancel"),i.qZA(),i.qZA())}const tt=function(s){return{"nv-file-over":s}},it=function(){return{key:"all",name:"Select",width:"38px",sortable:!1,checkAll:!1}},nt=function(){return{key:"name",name:"Name",sortable:!0,minWidth:"80px",searchInput:!0}},st=function(s){return{key:"capabilityType",name:"Type",sortable:!0,searchKey:"capabilityType",minWidth:"145px",type:"select",selectData:s,searchInput:!0}},ot=function(s){return{key:"communicationType",name:"Communication Type",sortable:!0,searchKey:"communicationType",minWidth:"180px",type:"select",selectData:s,searchInput:!0}},rt=function(s,t,e,n){return[s,t,e,n]};let O=(()=>{class s{constructor(e,n,o,r,a,l){this.http=e,this.route=n,this.router=o,this.paginateService=r,this.alertMessageService=a,this.sanitizer=l,this.submitted=!1,this.action=!0,this.cappData=[],this.capabilitiesTypes=[],this.communicationTypes=[],this.capabilitySet=[],this.allowedMimeType=["image/jpg","image/jpeg","image/png","image/tiff","image/gif"],this.logoUrl=v.A.staticData,this.statusDates=[],this.maxFileSize=1e6,this.AMF=new h.cw({name:new h.NI("",[h.kI.required,h.kI.maxLength(150),h.kI.minLength(5),h.kI.pattern(xe.S.regex.noSpace)]),imageName:new h.NI("",[]),dsc:new h.NI("",[h.kI.maxLength(250)]),height:new h.NI(null,[h.kI.required,h.kI.min(0),h.kI.max(9999999999999.99)]),weight:new h.NI(null,[h.kI.required,h.kI.min(0),h.kI.max(9999999999999.99)]),width:new h.NI(null,[h.kI.required,h.kI.min(0),h.kI.max(9999999999999.99)]),length:new h.NI(null,[h.kI.required,h.kI.min(0),h.kI.max(9999999999999.99)]),status:new h.NI("",[h.kI.required])}),this.searchData={},this.uploader=new F.bA({allowedMimeType:this.allowedMimeType}),this.hasBaseDropZoneOver=!1}get getPaginateService(){return this.paginateService}fileOverBase(e){this.hasBaseDropZoneOver=e}checkRequired(e){if(this.AMF.get(e).getError("required"))return this.cssSelector="#"+e,this.AMF.get(e).getError("required")}onFileSelected(e){this.selectedFiles=e[0],console.log(this.selectedFiles),this.filePreviewPath="",this.selectedFiles&&(this.filePreviewPath=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(this.selectedFiles))),this.maxFileSize<this.selectedFiles.size&&this.AMF.get("imageName").setErrors({"file-max-size":"File is too large. File size must be not large than "+this.maxFileSize+" bytes."}),this.fileChecked=!0}getFormValues(){return this.AMF.value}checkAll(e){for(let n=0;n<this.cappData.length;n++)for(let o=0;o<this.capabilitySet.length;o++)e.target.checked&&this.capabilitySet.push({id:this.cappData[n],communicationType:this.cappData[n].communicationType})}addRemoveCapability(e,n){let o=!0;for(let r=0;r<this.capabilitySet.length;r++)if(this.capabilitySet[r].id===e){o=!1,this.capabilitySet.splice(r,1);break}o&&this.capabilitySet.push({id:e,communicationType:n})}checkCheckedCapabilities(e){for(let n=0;n<this.capabilitySet.length;n++)if(this.capabilitySet[n].id===e)return!0}checkCapabilitiesLora(){for(let e=0;e<this.capabilitySet.length;e++)if("LORA"===this.capabilitySet[e].communicationType)return!0}checkLengthLora(){let e=0;for(let n=0;n<this.capabilitySet.length;n++)if("LORA"===this.capabilitySet[n].communicationType&&(e+=1),e>1)return!0}ngOnInit(){this.paginateService.paginateSetShowCountInStorage(25),this.http.get(v.A.httpUrl.resource_server+"/asset-model/status").subscribe(e=>{this.statusDates=e}),this.paginateService.restartPaginate(),this.http.get(v.A.httpUrl.resource_server+"/capability/capability-type").subscribe(e=>{this.capabilitiesTypes.push({id:null,name:"All"});for(let n=0;n<e.length;n++)this.capabilitiesTypes.push({id:e[n],name:e[n]})},e=>{404===e.status&&this.alertMessageService.addDangerMessage(e.error.message)}),this.http.get(v.A.httpUrl.resource_server+"/capability/communication-type").subscribe(e=>{this.communicationTypes.push({id:null,name:"All"});for(let n=0;n<e.length;n++)this.communicationTypes.push({id:e[n],name:e[n]})},e=>{404===e.status&&this.alertMessageService.addDangerMessage(e.error.message)}),this.subscription=this.paginateService.getResult.subscribe(e=>this.getResult(e))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}setFormValue(){this.AMF.get("name").setValue(this.assetModel.name),this.assetModelLog=this.assetModel.imageName,this.AMF.get("dsc").setValue(this.assetModel.dsc),this.AMF.get("length").setValue(this.assetModel.length),this.AMF.get("width").setValue(this.assetModel.width),this.AMF.get("height").setValue(this.assetModel.height),this.AMF.get("weight").setValue(this.assetModel.weight),this.AMF.get("status").setValue(this.assetModel.status)}addEditAssetModel(){if(this.submitted=!0,this.AMF.valid&&this.capabilitySet.length>1&&this.checkCapabilitiesLora()&&!this.checkLengthLora()){const e=this.getFormValues();e.capabilitySet=this.capabilitySet,this.assetModelId&&(e.id=this.assetModelId,e.imageName=this.assetModel.imageName);const n=new FormData,o=new Blob([JSON.stringify(e)],{type:"application/json"});n.append("assetModel",o,"assetModel.json"),this.selectedFiles&&(n.append("file",this.selectedFiles,this.selectedFiles.name),delete e.imageName),this.assetModelId?(console.log(n,"formValue 222"),this.http.patch(v.A.httpUrl.resource_server+"/asset-model",n).subscribe(()=>{this.alertMessageService.addSuccessMessage("Asset model has been successfully edited."),this.router.navigate(["/aya/asset-model/list"])},r=>{this.alertMessageService.addDangerMessage(r.error.message)})):this.http.put(v.A.httpUrl.resource_server+"/asset-model",n).subscribe(()=>{this.alertMessageService.addSuccessMessage("Asset model has been successfully added."),this.router.navigate(["/aya/asset-model/list"])},r=>{this.alertMessageService.addDangerMessage(r.error.message)})}}getResult(e){if(this.paginateService.checkPageEmpty()){(0,$.K)(e)&&(this.searchData=e);const n="?"+this.paginateService.getRequestParamsFromObject(this.searchData);this.http.get(v.A.httpUrl.resource_server+"/capability"+n).subscribe(o=>{this.paginateService.allRecordCount=o.totalElements,this.paginateService.calculatePaginate(o.content),this.cappData=o.content,this.action||(this.assetModelId=+this.route.snapshot.paramMap.get("assetModelId"),this.http.get(v.A.httpUrl.resource_server+"/asset-model/"+this.assetModelId).subscribe(r=>{this.assetModel=r;for(let a=0;a<r.capabilitySet.length;a++)for(let l=0;l<this.cappData.length;l++)r.capabilitySet[a].id===this.cappData[l].id&&this.capabilitySet.push({id:this.cappData[l].id,communicationType:this.cappData[l].communicationType});this.setFormValue()}))},o=>{404===o.status&&this.alertMessageService.addDangerMessage(o.error.message)})}}}return s.\u0275fac=function(e){return new(e||s)(i.Y36(X.eN),i.Y36(C.gz),i.Y36(C.F0),i.Y36(P.r),i.Y36(ee.O),i.Y36(Fe.H7))},s.\u0275cmp=i.Xpm({type:s,selectors:[["app-object-type-form"]],inputs:{cssSelector:"cssSelector"},decls:92,vars:67,consts:[[3,"formGroup"],[1,"card","col-md-12","px-0","mx-auto","shadow-lg"],[1,"form-group"],[1,"col-md-12","mb-2","mt-3"],["title","Asset Model logo",1,"d-flex","align-items-center","col-md-2","mx-auto","square","border","border-secondary","rounded"],["class","img-fluid","style","width:100%","alt","",3,"src",4,"ngIf"],["class","img-fluid","style","width:100%",3,"src","alt",4,"ngIf"],["src","../../../assets/img/noImage.png","alt","","style","width:100%",4,"ngIf"],["class","px-3  d-flex justify-content-center text-muted",4,"ngIf"],[1,"col-md-12","mb-2"],[1,"d-flex","justify-content-center"],["ng2FileDrop","",1,"my-drop-zone","p-0","mx-0","text-center",3,"ngClass","uploader","fileOver","onFileDrop"],["for","imageName",1,"col-form-label","text-center","col-12","px-2",2,"width","120px","min-width","120px"],[1,"btn","btn-success","m-0","col-12"],["aria-hidden","true",1,"fa","fa-plus"],[1,"col-12","file_input_parent"],["id","imageName","cssSelector","#imageName","type","file","ng2FileSelect","","formControlName","imageName",1,"form-control","input_file",3,"accept","uploader","ngClass","onFileSelected"],["class","invalid-feedback",4,"ngIf"],["class","invalid-feedback ",4,"ngIf"],["for","name"],["id","name","type","text","formControlName","name",1,"form-control",3,"ngClass"],[1,"invalid-feedback",3,"field","name"],[1,"invalid-feedback",3,"field"],["for","dsc"],["id","dsc","name","description","rows","5","formControlName","dsc",1,"form-control",3,"ngClass"],[1,"row","col-md-12"],[1,"col-md-3","mb-2"],["for","length"],["id","length","type","number","min","0","formControlName","length",1,"form-control",3,"ngClass"],[1,"invalid-feedback","text-center",3,"field"],["for","width"],["id","width","type","number","min","0","formControlName","width",1,"form-control",3,"ngClass"],["for","height"],["id","height","type","number","min","0","formControlName","height",1,"form-control",3,"ngClass"],["for","weight"],["id","weight","type","number","min","0","formControlName","weight",1,"form-control",3,"ngClass"],[1,"col-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-sm-12","col-md-6"],[1,"col-sm-12","table-parent"],[3,"headerParams","invalidTable"],["class","odd",4,"ngFor","ngForOf"],["class","d-block invalid-feedback",4,"ngIf"],["for","status"],["id","status","formControlName","status",1,"form-control",3,"ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"card-footer"],["class","btn btn-sm btn-success","type","submit",3,"click",4,"ngIf"],["class","btn btn-sm btn-primary","type","submit",3,"click",4,"ngIf"],["routerLink","../","class","btn btn-sm btn-danger mx-1",4,"ngIf"],["routerLink","../../","class","btn btn-sm btn-danger mx-1",4,"ngIf"],["alt","",1,"img-fluid",2,"width","100%",3,"src"],[1,"img-fluid",2,"width","100%",3,"src","alt"],["src","../../../assets/img/noImage.png","alt","",2,"width","100%"],[1,"px-3","d-flex","justify-content-center","text-muted"],[1,"invalid-feedback"],[1,"odd"],[1,"pl-3"],[1,"text-center","custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",2,"cursor","pointer",3,"id","value","checked","click"],[1,"custom-control-label",3,"for"],[1,""],[1,"d-block","invalid-feedback"],[3,"value"],["type","submit",1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-dot-circle-o"],["type","submit",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-pencil"],["routerLink","../",1,"btn","btn-sm","btn-danger","mx-1"],[1,"cui-arrow-left"],["routerLink","../../",1,"btn","btn-sm","btn-danger","mx-1"]],template:function(e,n){1&e&&(i.TgZ(0,"form",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"div",3),i.TgZ(4,"div",4),i.YNc(5,Ue,1,1,"img",5),i.YNc(6,Ve,1,2,"img",6),i.YNc(7,Be,1,0,"img",7),i.qZA(),i.YNc(8,ze,2,1,"span",8),i.qZA(),i.TgZ(9,"div",9),i.TgZ(10,"div",10),i.TgZ(11,"div",11),i.NdJ("fileOver",function(r){return n.fileOverBase(r)})("onFileDrop",function(r){return n.onFileSelected(r)}),i.TgZ(12,"label",12),i.TgZ(13,"span",13),i._UZ(14,"i",14),i.TgZ(15,"small"),i._uU(16," Add Logo"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(17,"div",15),i.TgZ(18,"input",16),i.NdJ("onFileSelected",function(r){return n.onFileSelected(r)}),i.qZA(),i.YNc(19,je,2,0,"div",17),i.YNc(20,He,2,1,"div",18),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(21,"div",9),i.TgZ(22,"label",19),i._uU(23,"Name"),i.qZA(),i._UZ(24,"input",20),i._UZ(25,"app-required-validator",21),i.YNc(26,qe,2,0,"div",17),i._UZ(27,"app-max-length-validator",22),i._UZ(28,"app-min-length-validator",22),i.qZA(),i.TgZ(29,"div",9),i.TgZ(30,"label",23),i._uU(31,"Description"),i.qZA(),i._UZ(32,"textarea",24),i._UZ(33,"app-max-length-validator",22),i.qZA(),i.TgZ(34,"div",25),i.TgZ(35,"div",26),i.TgZ(36,"label",27),i._uU(37,"Length (cm)"),i.qZA(),i._UZ(38,"input",28),i._UZ(39,"app-required-validator",21),i._UZ(40,"app-max-value-validator",29),i._UZ(41,"app-min-value-validator",29),i.qZA(),i.TgZ(42,"div",26),i.TgZ(43,"label",30),i._uU(44,"Width (cm)"),i.qZA(),i._UZ(45,"input",31),i._UZ(46,"app-required-validator",21),i._UZ(47,"app-max-value-validator",29),i._UZ(48,"app-min-value-validator",29),i.qZA(),i.TgZ(49,"div",26),i.TgZ(50,"label",32),i._uU(51,"Height (cm)"),i.qZA(),i._UZ(52,"input",33),i._UZ(53,"app-required-validator",21),i._UZ(54,"app-max-value-validator",29),i._UZ(55,"app-min-value-validator",29),i.qZA(),i.TgZ(56,"div",26),i.TgZ(57,"label",34),i._uU(58,"Weight (kg) "),i.qZA(),i._UZ(59,"input",35),i._UZ(60,"app-required-validator",21),i._UZ(61,"app-max-value-validator",29),i._UZ(62,"app-min-value-validator",29),i.qZA(),i.qZA(),i.TgZ(63,"div",36),i.TgZ(64,"div",37),i.TgZ(65,"div",38),i._uU(66,"Capabilities"),i.qZA(),i.TgZ(67,"div",39),i.TgZ(68,"div",40),i._UZ(69,"app-paginate-show-count",41),i.qZA(),i.TgZ(70,"div",40),i.TgZ(71,"div",42),i.TgZ(72,"app-sortable-table-header",43),i.TgZ(73,"tbody"),i.YNc(74,Ge,11,7,"tr",44),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.YNc(75,Ke,2,0,"div",45),i.YNc(76,We,2,0,"div",45),i.YNc(77,Qe,2,0,"div",45),i._UZ(78,"app-paginate"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(79,"div",9),i.TgZ(80,"label",46),i._uU(81,"Status"),i.qZA(),i.TgZ(82,"select",47),i.TgZ(83,"option",48),i._uU(84,"Please select status"),i.qZA(),i.YNc(85,Je,2,2,"option",49),i.qZA(),i._UZ(86,"app-required-validator",21),i.qZA(),i.qZA(),i.TgZ(87,"div",50),i.YNc(88,Ye,3,0,"button",51),i.YNc(89,$e,3,0,"button",52),i.YNc(90,Xe,3,0,"a",53),i.YNc(91,et,3,0,"a",54),i.qZA(),i.qZA()),2&e&&(i.Q6J("formGroup",n.AMF),i.xp6(5),i.Q6J("ngIf",n.filePreviewPath),i.xp6(1),i.Q6J("ngIf",n.assetModelLog&&!n.filePreviewPath),i.xp6(1),i.Q6J("ngIf",!n.assetModelLog&&!n.filePreviewPath),i.xp6(1),i.Q6J("ngIf",null==n.selectedFiles?null:n.selectedFiles.name),i.xp6(3),i.Q6J("ngClass",i.VKq(54,tt,n.hasBaseDropZoneOver))("uploader",n.uploader),i.xp6(7),i.Q6J("accept",n.allowedMimeType.toString())("uploader",n.uploader)("ngClass",n.submitted||n.fileChecked||n.AMF.get("imageName").touched?n.AMF.get("imageName").invalid?"is-invalid ":"is-valid":""),i.xp6(1),i.Q6J("ngIf",(n.submitted||n.fileChecked||n.AMF.get("imageName").touched)&&n.checkRequired("imageName")),i.xp6(1),i.Q6J("ngIf",n.AMF.get("imageName").invalid),i.xp6(4),i.Q6J("ngClass",n.submitted||n.AMF.get("name").touched?n.AMF.get("name").invalid?"is-invalid ":"is-valid":""),i.xp6(1),i.Q6J("field",n.AMF.get("name"))("name","Name"),i.xp6(1),i.Q6J("ngIf",(n.submitted||n.AMF.get("name").touched)&&n.AMF.get("name").invalid&&n.AMF.get("name").getError("pattern")),i.xp6(1),i.Q6J("field",n.AMF.get("name")),i.xp6(1),i.Q6J("field",n.AMF.get("name")),i.xp6(4),i.Q6J("ngClass",n.submitted||n.AMF.get("dsc").touched?n.AMF.get("dsc").invalid?"is-invalid ":"is-valid":""),i.xp6(1),i.Q6J("field",n.AMF.get("dsc")),i.xp6(5),i.Q6J("ngClass",n.submitted||n.AMF.get("length").touched?n.AMF.get("length").invalid?"is-invalid ":"is-valid":""),i.xp6(1),i.Q6J("field",n.AMF.get("length"))("name","Length"),i.xp6(1),i.Q6J("field",n.AMF.get("length")),i.xp6(1),i.Q6J("field",n.AMF.get("length")),i.xp6(4),i.Q6J("ngClass",n.submitted||n.AMF.get("width").touched?n.AMF.get("width").invalid?"is-invalid ":"is-valid":""),i.xp6(1),i.Q6J("field",n.AMF.get("width"))("name","Width"),i.xp6(1),i.Q6J("field",n.AMF.get("width")),i.xp6(1),i.Q6J("field",n.AMF.get("width")),i.xp6(4),i.Q6J("ngClass",n.submitted||n.AMF.get("height").touched?n.AMF.get("height").invalid?"is-invalid ":"is-valid":""),i.xp6(1),i.Q6J("field",n.AMF.get("height"))("name","Height"),i.xp6(1),i.Q6J("field",n.AMF.get("height")),i.xp6(1),i.Q6J("field",n.AMF.get("height")),i.xp6(4),i.Q6J("ngClass",n.submitted||n.AMF.get("weight").touched?n.AMF.get("weight").invalid?"is-invalid ":"is-valid":""),i.xp6(1),i.Q6J("field",n.AMF.get("weight"))("name","Weight"),i.xp6(1),i.Q6J("field",n.AMF.get("weight")),i.xp6(1),i.Q6J("field",n.AMF.get("weight")),i.xp6(10),i.Q6J("headerParams",i.l5B(62,rt,i.DdM(56,it),i.DdM(57,nt),i.VKq(58,st,n.capabilitiesTypes),i.VKq(60,ot,n.communicationTypes)))("invalidTable",n.submitted&&n.capabilitySet.length<2||n.submitted&&n.capabilitySet.length>1&&!n.checkCapabilitiesLora()||n.submitted&&n.checkLengthLora()),i.xp6(2),i.Q6J("ngForOf",n.getPaginateService.paginateResult[n.getPaginateService.page]),i.xp6(1),i.Q6J("ngIf",n.capabilitySet.length<2&&n.submitted),i.xp6(1),i.Q6J("ngIf",n.capabilitySet.length>1&&n.submitted&&!n.checkCapabilitiesLora()),i.xp6(1),i.Q6J("ngIf",n.submitted&&n.checkLengthLora()),i.xp6(5),i.Q6J("ngClass",n.submitted||n.AMF.get("status").touched?n.AMF.get("status").invalid?"is-invalid ":"is-valid":""),i.xp6(3),i.Q6J("ngForOf",n.statusDates),i.xp6(1),i.Q6J("field",n.AMF.get("status"))("name","Status"),i.xp6(2),i.Q6J("ngIf",n.action),i.xp6(1),i.Q6J("ngIf",!n.action),i.xp6(1),i.Q6J("ngIf",n.action),i.xp6(1),i.Q6J("ngIf",!n.action))},directives:[h._Y,h.JL,h.sg,y.O5,F.GN,y.mk,h.Fj,F.C6,h.JJ,h.u,Pe.r,Oe.f,Le.W,h.qQ,h.wV,Ne.Z,Ze.V,te.S,ie.X,y.sg,ne.c,h.EJ,h.YN,h.Kr,C.yS],styles:[".my-drop-zone[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.my-drop-zone[_ngcontent-%COMP%]   .file_input_parent[_ngcontent-%COMP%]{overflow:hidden;position:relative;cursor:pointer}.my-drop-zone[_ngcontent-%COMP%]   .file_input_parent[_ngcontent-%COMP%]   .input_file[_ngcontent-%COMP%]{display:none}"]}),s})(),at=(()=>{class s{constructor(e){this.paginateService=e,this.paginateService.sessionPrefix="ASSET_MODEL_FORM_NEW"}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)(i.Y36(P.r))},s.\u0275cmp=i.Xpm({type:s,selectors:[["app-add-object-type"]],viewQuery:function(e,n){if(1&e&&i.Gf(O,7),2&e){let o;i.iGM(o=i.CRH())&&(n.assetModelForm=o.first)}},decls:5,vars:0,consts:[[1,"card"],[1,"card-header"]],template:function(e,n){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"strong"),i._uU(3,"Add Asset Model"),i.qZA(),i.qZA(),i._UZ(4,"app-object-type-form"),i.qZA())},directives:[O],styles:[""]}),s})(),lt=(()=>{class s{constructor(e){this.paginateService=e,this.paginateService.sessionPrefix="ASSET_MODEL_FORM_EDIT"}ngOnInit(){this.AMForm.action=!1}}return s.\u0275fac=function(e){return new(e||s)(i.Y36(P.r))},s.\u0275cmp=i.Xpm({type:s,selectors:[["app-edit-object-type"]],viewQuery:function(e,n){if(1&e&&i.Gf(O,7),2&e){let o;i.iGM(o=i.CRH())&&(n.AMForm=o.first)}},decls:5,vars:0,consts:[[1,"card"],[1,"card-header"]],template:function(e,n){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"strong"),i._uU(3,"Edit Asset Model"),i.qZA(),i.qZA(),i._UZ(4,"app-object-type-form"),i.qZA())},directives:[O],styles:[""]}),s})();var se=u(18);const ct=["confirmDeleteModal"];function dt(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"div",43),i.TgZ(1,"button",44),i.NdJ("click",function(){i.CHM(e);const o=i.oxw().$implicit;return o.showCapabilities=!o.showCapabilities}),i._uU(2," Click to show capabilities "),i.qZA(),i.qZA()}}function ht(s,t){if(1&s&&(i.TgZ(0,"li",32),i._uU(1),i.qZA()),2&s){const e=t.$implicit;i.xp6(1),i.Oqu(e.name)}}function ut(s,t){if(1&s&&(i.TgZ(0,"ul",45),i.YNc(1,ht,2,1,"li",46),i.qZA()),2&s){const e=i.oxw().$implicit;i.xp6(1),i.Q6J("ngForOf",e.capabilitySet)}}const gt=function(s){return["../",s,"edit"]};function pt(s,t){if(1&s){const e=i.EpF();i.TgZ(0,"tr",30),i.TgZ(1,"td",31),i._uU(2),i.qZA(),i.TgZ(3,"td",32),i._uU(4),i.qZA(),i.TgZ(5,"td",32),i._uU(6),i.qZA(),i.TgZ(7,"td",32),i._uU(8),i.qZA(),i.TgZ(9,"td",32),i._uU(10),i.qZA(),i.TgZ(11,"td",32),i._uU(12),i.qZA(),i.TgZ(13,"td",33),i.TgZ(14,"span",34),i._uU(15),i.qZA(),i.qZA(),i.TgZ(16,"td",35),i.YNc(17,dt,3,0,"div",36),i.YNc(18,ut,2,1,"ul",37),i.qZA(),i.TgZ(19,"td",38),i.TgZ(20,"a",39),i.TgZ(21,"span",40),i._UZ(22,"i",4),i.qZA(),i.qZA(),i.TgZ(23,"button",41),i.NdJ("click",function(){const r=i.CHM(e).$implicit;return i.oxw().showDeleteModal(r.id)}),i._UZ(24,"i",42),i.qZA(),i.qZA(),i.qZA()}if(2&s){const e=t.$implicit,n=t.index,o=i.oxw();i.xp6(2),i.Oqu(o.getPaginateService.page*o.getPaginateService.showCount+n+1),i.xp6(2),i.Oqu(e.name),i.xp6(2),i.Oqu(e.length),i.xp6(2),i.Oqu(e.width),i.xp6(2),i.Oqu(e.height),i.xp6(2),i.Oqu(e.weight),i.xp6(2),i.ekj("badge-success","ENABLE"===e.status)("badge-danger","DISABLE"===e.status),i.xp6(1),i.hij(" ",e.status," "),i.xp6(2),i.Q6J("ngIf",e.capabilitySet),i.xp6(1),i.Q6J("ngIf",e.showCapabilities),i.xp6(2),i.Q6J("routerLink",i.VKq(14,gt,e.id))}}const ft=function(){return{key:"id",name:"No",sortable:!1}},_t=function(){return{key:"name",name:"Name",sortable:!0,minWidth:"80px",searchInput:!0}},mt=function(){return{key:"length",name:"Length (cm)",sortable:!0,searchKey:"length",minWidth:"120px",searchInput:!0,type:"number"}},vt=function(){return{key:"width",name:"Width (cm)",sortable:!0,searchKey:"width",minWidth:"115px",searchInput:!0,type:"number"}},bt=function(){return{key:"height",name:"Height (cm)",sortable:!0,searchKey:"height",minWidth:"120px",searchInput:!0,type:"number"}},yt=function(){return{key:"weight",name:"Weight (kg)",sortable:!0,searchKey:"weight",minWidth:"120px",searchInput:!0,type:"number"}},Ct=function(s){return{key:"status",name:"Status",sortable:!0,searchKey:"status",minWidth:"80px",searchInput:!0,type:"select",selectData:s}},Dt=function(){return{key:"capabilitySet",name:"Capabilities",sortable:!1,searchKey:"capabilitySet",searchInput:!1}},St=function(){return{key:"action",name:"Action",width:"38px",sortable:!1}},Et=function(s,t,e,n,o,r,a,l,c){return[s,t,e,n,o,r,a,l,c]},Tt=[{path:"",redirectTo:"list"},{path:"",component:ke,children:[{path:"list",component:(()=>{class s{constructor(e,n,o){this.http=e,this.alertMessageService=n,this.paginateService=o,this.statusDates=[],this.searchData={},this.paginateService.sessionPrefix="LIST_ASSET_MODEL"}get getPaginateService(){return this.paginateService}deleteSelectedItem(){this.http.delete(v.A.httpUrl.resource_server+"/asset-model/"+this.deleteAssetModelId).subscribe(()=>{this.alertMessageService.addSuccessMessage("Asset Model successfully deleted"),this.deleteModal.hide(),this.refreshAll()},e=>{this.alertMessageService.addDangerMessage(e.error.message),this.deleteModal.hide()})}ngOnInit(){console.log("ngOnInit asset-model"),this.paginateService.restartPaginate(),this.http.get(v.A.httpUrl.resource_server+"/asset-model/status").subscribe(e=>{this.statusDates.push({id:null,name:"All"});for(let n=0;n<e.length;n++)this.statusDates.push({id:e[n],name:e[n]})},e=>{404===e.status&&this.alertMessageService.addDangerMessage(e.error.message)}),this.subscription=this.paginateService.getResult.subscribe(e=>this.getResult(e))}ngAfterViewInit(){console.log("ngAfterViewInit asset-model")}ngOnDestroy(){console.log("ngOnDestroy asset-model"),this.subscription&&this.subscription.unsubscribe()}showDeleteModal(e){this.deleteAssetModelId=e,this.deleteModal.show()}refreshAll(){this.paginateService.setEmptyPaginateResult(),this.getResult()}getResult(e){if(console.log(e,"asset-model getResult"),this.paginateService.checkPageEmpty()){(0,$.K)(e)&&(this.searchData=e);const n="?"+this.paginateService.getRequestParamsFromObject(this.searchData);this.http.get(v.A.httpUrl.resource_server+"/asset-model"+n).subscribe(o=>{this.paginateService.allRecordCount=o.totalElements,this.paginateService.calculatePaginate(o.content)},o=>{404===o.status&&this.alertMessageService.addDangerMessage(o.error.message)})}}}return s.\u0275fac=function(e){return new(e||s)(i.Y36(X.eN),i.Y36(ee.O),i.Y36(P.r))},s.\u0275cmp=i.Xpm({type:s,selectors:[["app-list-asset-model"]],viewQuery:function(e,n){if(1&e&&i.Gf(ct,7),2&e){let o;i.iGM(o=i.CRH())&&(n.deleteModal=o.first)}},decls:43,vars:22,consts:[["id","ui-view"],[1,"animated","fadeIn"],[1,"card"],[1,"card-header"],[1,"fa","fa-edit"],[1,"float-right","m-0"],["routerLink","../add",1,"ml-4"],["aria-hidden","true",1,"fa","fa-plus"],["href","javascript:void(0)","title","refresh",1,"ml-4",3,"click"],["aria-hidden","true",1,"fa","fa-refresh"],[1,"card-body"],["id","DataTables_Table_0_wrapper",1,"dataTables_wrapper","dt-bootstrap4","no-footer"],[1,"row"],[1,"col-sm-12","col-md-6"],[1,"col-sm-12","table-parent"],[3,"headerParams"],["class","odd",4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["confirmDeleteModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash-o"],[1,"odd"],[1,"listId"],[1,""],[1,"text-center"],[1,"badge"],[1,"px-4"],["class","col-6 col-sm-4 col-md-2 col-xl mb-3 mb-xl-0 text-center",4,"ngIf"],["class","mt-3 pl-0 text-center",4,"ngIf"],[1,"edit"],["title","Edit",3,"routerLink"],[1,"btn","btn-info"],["title","Remove",1,"btn","ml-2","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"col-6","col-sm-4","col-md-2","col-xl","mb-3","mb-xl-0","text-center"],["type","button",1,"btn","btn-sm","btn-ghost-primary","active",3,"click"],[1,"mt-3","pl-0","text-center"],["class","",4,"ngFor","ngForOf"]],template:function(e,n){if(1&e){const o=i.EpF();i.TgZ(0,"div",0),i.TgZ(1,"div"),i.TgZ(2,"div",1),i.TgZ(3,"div",2),i.TgZ(4,"div",3),i._UZ(5,"i",4),i._uU(6," Asset Model "),i.TgZ(7,"p",5),i.TgZ(8,"a",6),i._UZ(9,"i",7),i._uU(10," Add new asset model"),i.qZA(),i.TgZ(11,"a",8),i.NdJ("click",function(){return n.refreshAll()}),i._UZ(12,"i",9),i._uU(13," Reload "),i.qZA(),i.qZA(),i.qZA(),i.TgZ(14,"div",10),i.TgZ(15,"div",11),i.TgZ(16,"div",12),i._UZ(17,"app-paginate-show-count",13),i.qZA(),i.TgZ(18,"div",12),i.TgZ(19,"div",14),i.TgZ(20,"app-sortable-table-header",15),i.TgZ(21,"tbody"),i.YNc(22,pt,25,16,"tr",16),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i._UZ(23,"app-paginate"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(24,"div",17,18),i.TgZ(26,"div",19),i.TgZ(27,"div",20),i.TgZ(28,"div",21),i.TgZ(29,"h4",22),i._uU(30,"Warning"),i.qZA(),i.TgZ(31,"button",23),i.NdJ("click",function(){return i.CHM(o),i.MAs(25).hide()}),i.TgZ(32,"span",24),i._uU(33,"\xd7"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(34,"div",25),i.TgZ(35,"p"),i._uU(36,"Are you sure you want to delete this asset model?"),i.qZA(),i.qZA(),i.TgZ(37,"div",26),i.TgZ(38,"button",27),i.NdJ("click",function(){return i.CHM(o),i.MAs(25).hide()}),i._uU(39,"Cancel"),i.qZA(),i.TgZ(40,"button",28),i.NdJ("click",function(){return n.deleteSelectedItem()}),i._UZ(41,"i",29),i._uU(42," Delete "),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()}2&e&&(i.xp6(20),i.Q6J("headerParams",i.rFY(12,Et,[i.DdM(2,ft),i.DdM(3,_t),i.DdM(4,mt),i.DdM(5,vt),i.DdM(6,bt),i.DdM(7,yt),i.VKq(8,Ct,n.statusDates),i.DdM(10,Dt),i.DdM(11,St)])),i.xp6(2),i.Q6J("ngForOf",n.getPaginateService.paginateResult[n.getPaginateService.page]))},directives:[C.yS,te.S,ie.X,y.sg,y.O5,ne.c,se.oB],styles:[""]}),s})(),data:{browserTitle:"Asset Model List"}},{path:"add",component:at,data:{title:"Add",browserTitle:"Asset Model Add"}},{path:":assetModelId/edit",component:lt,data:{title:"Edit",browserTitle:"Asset Model Edit"}}]}];let wt=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[[C.Bz.forChild(Tt)],C.Bz]}),s})();var At=u(4466),It=u(6217);let j;try{j="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(s){j=!1}let w,H,Mt=(()=>{class s{constructor(e){this._platformId=e,this.isBrowser=this._platformId?(0,y.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!j)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return s.\u0275fac=function(e){return new(e||s)(i.LFG(i.Lbi))},s.\u0275prov=i.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function I(s){return function Rt(){if(null==w&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>w=!0}))}finally{w=w||!1}return w}()?s:!!s.capture}function re(s){if(function kt(){if(null==H){const s="undefined"!=typeof document?document.head:null;H=!(!s||!s.createShadowRoot&&!s.attachShadow)}return H}()){const t=s.getRootNode?s.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function N(s){return s.composedPath?s.composedPath()[0]:s.target}function _(s){return s instanceof i.SBq?s.nativeElement:s}var p=u(8929),M=u(4096),Qt=u(1715),de=u(352),Jt=u(4202),Yt=u(6787),$t=u(7625),ei=(u(2950),u(7568));let ii=(()=>{class s{constructor(e,n,o){this._platform=e,this._change=new p.xQ,this._changeListener=r=>{this._change.next(r)},this._document=o,n.runOutsideAngular(()=>{if(e.isBrowser){const r=this._getWindow();r.addEventListener("resize",this._changeListener),r.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:o}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+n,height:o,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,n=this._getWindow(),o=e.documentElement,r=o.getBoundingClientRect();return{top:-r.top||e.body.scrollTop||n.scrollY||o.scrollTop||0,left:-r.left||e.body.scrollLeft||n.scrollX||o.scrollLeft||0}}change(e=20){return e>0?this._change.pipe((0,ei.e)(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return s.\u0275fac=function(e){return new(e||s)(i.LFG(Mt),i.LFG(i.R0b),i.LFG(y.K0,8))},s.\u0275prov=i.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ni=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({}),s})();function q(s,t,e){for(let n in t)if(t.hasOwnProperty(n)){const o=t[n];o?s.setProperty(n,o,(null==e?void 0:e.has(n))?"important":""):s.removeProperty(n)}return s}function E(s,t){const e=t?"":"none";q(s.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function he(s,t,e){q(s.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function U(s,t){return t&&"none"!=t?s+" "+t:s}function ue(s){const t=s.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(s)*t}function G(s,t){return s.getPropertyValue(t).split(",").map(n=>n.trim())}function K(s){const t=s.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function W(s,t,e){const{top:n,bottom:o,left:r,right:a}=s;return e>=n&&e<=o&&t>=r&&t<=a}function R(s,t,e){s.top+=t,s.bottom=s.top+s.height,s.left+=e,s.right=s.left+s.width}function ge(s,t,e,n){const{top:o,right:r,bottom:a,left:l,width:c,height:d}=s,g=c*t,f=d*t;return n>o-f&&n<a+f&&e>l-g&&e<r+g}class pe{constructor(t,e){this._document=t,this._viewportRuler=e,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:K(e)})})}handleScroll(t){const e=N(t),n=this.positions.get(e);if(!n)return null;const o=n.scrollPosition;let r,a;if(e===this._document){const d=this._viewportRuler.getViewportScrollPosition();r=d.top,a=d.left}else r=e.scrollTop,a=e.scrollLeft;const l=o.top-r,c=o.left-a;return this.positions.forEach((d,g)=>{d.clientRect&&e!==g&&e.contains(g)&&R(d.clientRect,l,c)}),o.top=r,o.left=a,{top:l,left:c}}}function fe(s){const t=s.cloneNode(!0),e=t.querySelectorAll("[id]"),n=s.nodeName.toLowerCase();t.removeAttribute("id");for(let o=0;o<e.length;o++)e[o].removeAttribute("id");return"canvas"===n?ve(s,t):("input"===n||"select"===n||"textarea"===n)&&me(s,t),_e("canvas",s,t,ve),_e("input, textarea, select",s,t,me),t}function _e(s,t,e,n){const o=t.querySelectorAll(s);if(o.length){const r=e.querySelectorAll(s);for(let a=0;a<o.length;a++)n(o[a],r[a])}}let oi=0;function me(s,t){"file"!==t.type&&(t.value=s.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${oi++}`)}function ve(s,t){const e=t.getContext("2d");if(e)try{e.drawImage(s,0,0)}catch(n){}}const be=I({passive:!0}),ye=I({passive:!1}),Q=new Set(["position"]);class ai{constructor(t,e,n,o,r,a){this._config=e,this._document=n,this._ngZone=o,this._viewportRuler=r,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new p.xQ,this._pointerMoveSubscription=M.w.EMPTY,this._pointerUpSubscription=M.w.EMPTY,this._scrollSubscription=M.w.EMPTY,this._resizeSubscription=M.w.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new p.xQ,this.started=new p.xQ,this.released=new p.xQ,this.ended=new p.xQ,this.entered=new p.xQ,this.exited=new p.xQ,this.dropped=new p.xQ,this.moved=this._moveEvents,this._pointerDown=l=>{if(this.beforeStarted.next(),this._handles.length){const c=this._handles.find(d=>l.target&&(l.target===d||d.contains(l.target)));c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,l)}else this.disabled||this._initializeDragSequence(this._rootElement,l)},this._pointerMove=l=>{const c=this._getPointerPositionOnPage(l);if(!this._hasStartedDragging){if(Math.abs(c.x-this._pickupPositionOnPage.x)+Math.abs(c.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const z=Date.now()>=this._dragStartTime+this._getDragStartDelay(l),T=this._dropContainer;if(!z)return void this._endDragSequence(l);(!T||!T.isDragging()&&!T.isReceiving())&&(l.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(l)))}return}this._boundaryElement&&(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),l.preventDefault();const d=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(d),this._dropContainer)this._updateActiveDropContainer(d,c);else{const g=this._activeTransform;g.x=d.x-this._pickupPositionOnPage.x+this._passiveTransform.x,g.y=d.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(g.x,g.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:d,event:l,distance:this._getDragDistance(d),delta:this._pointerDirectionDelta})})},this._pointerUp=l=>{this._endDragSequence(l)},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new pe(n,r),a.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=function xt(s){return null!=s&&"false"!=`${s}`}(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(n=>E(n,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(n=>_(n)),this._handles.forEach(n=>E(n,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&e.add(n)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=_(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,ye),e.addEventListener("touchstart",this._pointerDown,be)}),this._initialTransform=void 0,this._rootElement=e),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?_(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){var t,e;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(t=this._rootElement)||void 0===t||t.remove()),null===(e=this._anchor)||void 0===e||e.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),E(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),E(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var t,e;null===(t=this._preview)||void 0===t||t.remove(),null===(e=this._previewRef)||void 0===e||e.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var t,e;null===(t=this._placeholder)||void 0===t||t.remove(),null===(e=this._placeholderRef)||void 0===e||e.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){k(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const n=this._rootElement,o=n.parentNode,r=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),l=this._getShadowRoot();o.insertBefore(a,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),he(n,!1,Q),this._document.body.appendChild(o.replaceChild(r,n)),this._getPreviewInsertionPoint(o,l).appendChild(this._preview),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const n=this.isDragging(),o=k(e),r=!o&&0!==e.button,a=this._rootElement,l=N(e),c=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),d=o?function Kt(s){const t=s.touches&&s.touches[0]||s.changedTouches&&s.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}(e):function Gt(s){return 0===s.buttons||0===s.offsetX&&0===s.offsetY}(e);if(l&&l.draggable&&"mousedown"===e.type&&e.preventDefault(),n||r||c||d)return;if(this._handles.length){const b=a.style;this._rootElementTapHighlight=b.webkitTapHighlightColor||"",b.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(b=>this._updateOnScroll(b)),this._boundaryElement&&(this._boundaryRect=K(this._boundaryElement));const g=this._previewTemplate;this._pickupPositionInElement=g&&g.template&&!g.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);const f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){he(this._rootElement,!0,Q),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,n=e.getItemIndex(this),o=this._getPointerPositionOnPage(t),r=this._getDragDistance(o),a=e._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:r,dropPoint:o}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:r,dropPoint:o}),e.drop(this,n,this._initialIndex,this._initialContainer,a,r,o),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:n,y:o}){let r=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=r,this._dropContainer.enter(this,t,e,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,o),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,n=t?t.template:null;let o;if(n&&t){const r=t.matchSize?this._rootElement.getBoundingClientRect():null,a=t.viewContainer.createEmbeddedView(n,t.context);a.detectChanges(),o=De(a,this._document),this._previewRef=a,t.matchSize?Se(o,r):o.style.transform=V(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const r=this._rootElement;o=fe(r),Se(o,r.getBoundingClientRect()),this._initialTransform&&(o.style.transform=this._initialTransform)}return q(o.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},Q),E(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(r=>o.classList.add(r)):o.classList.add(e)),o}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function si(s){const t=getComputedStyle(s),e=G(t,"transition-property"),n=e.find(l=>"transform"===l||"all"===l);if(!n)return 0;const o=e.indexOf(n),r=G(t,"transition-duration"),a=G(t,"transition-delay");return ue(r[o])+ue(a[o])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{const o=a=>{var l;(!a||N(a)===this._preview&&"transform"===a.propertyName)&&(null===(l=this._preview)||void 0===l||l.removeEventListener("transitionend",o),n(),clearTimeout(r))},r=setTimeout(o,1.5*e);this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let n;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),n=De(this._placeholderRef,this._document)):n=fe(this._rootElement),n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(t,e){const n=this._rootElement.getBoundingClientRect(),o=t===this._rootElement?null:t,r=o?o.getBoundingClientRect():n,a=k(e)?e.targetTouches[0]:e,l=this._getViewportScrollPosition();return{x:r.left-n.left+(a.pageX-r.left-l.left),y:r.top-n.top+(a.pageY-r.top-l.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),n=k(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,o=n.pageX-e.left,r=n.pageY-e.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const l=this._ownerSVGElement.createSVGPoint();return l.x=o,l.y=r,l.matrixTransform(a.inverse())}}return{x:o,y:r}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:o}=this.constrainPosition?this.constrainPosition(t,this):t;if("x"===this.lockAxis||"x"===e?o=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:r,y:a}=this._pickupPositionInElement,l=this._boundaryRect,c=this._previewRect,d=l.top+a,g=l.bottom-(c.height-a);n=Ce(n,l.left+r,l.right-(c.width-r)),o=Ce(o,d,g)}return{x:n,y:o}}_updatePointerDirectionDelta(t){const{x:e,y:n}=t,o=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,a=Math.abs(e-r.x),l=Math.abs(n-r.y);return a>this._config.pointerDirectionChangeThreshold&&(o.x=e>r.x?1:-1,r.x=e),l>this._config.pointerDirectionChangeThreshold&&(o.y=n>r.y?1:-1,r.y=n),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,E(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,ye),t.removeEventListener("touchstart",this._pointerDown,be)}_applyRootElementTransform(t,e){const n=V(t,e),o=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=o.transform&&"none"!=o.transform?o.transform:""),o.transform=U(n,this._initialTransform)}_applyPreviewTransform(t,e){var n;const o=(null===(n=this._previewTemplate)||void 0===n?void 0:n.template)?void 0:this._initialTransform,r=V(t,e);this._preview.style.transform=U(r,o)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const n=this._boundaryElement.getBoundingClientRect(),o=this._rootElement.getBoundingClientRect();if(0===n.width&&0===n.height||0===o.width&&0===o.height)return;const r=n.left-o.left,a=o.right-n.right,l=n.top-o.top,c=o.bottom-n.bottom;n.width>o.width?(r>0&&(t+=r),a>0&&(t-=a)):t=0,n.height>o.height?(l>0&&(e+=l),c>0&&(e-=c)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:k(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const n=N(t);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&R(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const t=this._parentPositions.positions.get(this._document);return t?t.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=re(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const n=this._previewContainer||"global";if("parent"===n)return t;if("global"===n){const o=this._document;return e||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return _(n)}}function V(s,t){return`translate3d(${Math.round(s)}px, ${Math.round(t)}px, 0)`}function Ce(s,t,e){return Math.max(t,Math.min(e,s))}function k(s){return"t"===s.type[0]}function De(s,t){const e=s.rootNodes;if(1===e.length&&e[0].nodeType===t.ELEMENT_NODE)return e[0];const n=t.createElement("div");return e.forEach(o=>n.appendChild(o)),n}function Se(s,t){s.style.width=`${t.width}px`,s.style.height=`${t.height}px`,s.style.transform=V(t.left,t.top)}function x(s,t){return Math.max(0,Math.min(t,s))}class ci{constructor(t,e,n,o,r){this._dragDropRegistry=e,this._ngZone=o,this._viewportRuler=r,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new p.xQ,this.entered=new p.xQ,this.exited=new p.xQ,this.dropped=new p.xQ,this.sorted=new p.xQ,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=M.w.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new p.xQ,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),(0,Qt.F)(0,de.Z).pipe((0,$t.R)(this._stopScrollTimers)).subscribe(()=>{const a=this._scrollNode,l=this.autoScrollStep;1===this._verticalScrollDirection?a.scrollBy(0,-l):2===this._verticalScrollDirection&&a.scrollBy(0,l),1===this._horizontalScrollDirection?a.scrollBy(-l,0):2===this._horizontalScrollDirection&&a.scrollBy(l,0)})},this.element=_(t),this._document=n,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new pe(n,r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,n,o){let r;this._draggingStarted(),null==o?(r=this.sortingDisabled?this._draggables.indexOf(t):-1,-1===r&&(r=this._getItemIndexFromPointerPosition(t,e,n))):r=o;const a=this._activeDraggables,l=a.indexOf(t),c=t.getPlaceholderElement();let d=a[r];if(d===t&&(d=a[r+1]),!d&&(null==r||-1===r||r<a.length-1)&&this._shouldEnterAsFirstChild(e,n)&&(d=a[0]),l>-1&&a.splice(l,1),d&&!this._dragDropRegistry.isDragging(d)){const g=d.getRootElement();g.parentElement.insertBefore(c,g),a.splice(r,0,t)}else _(this.element).appendChild(c),a.push(t);c.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,n,o,r,a,l){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:n,container:this,previousContainer:o,isPointerOverContainer:r,distance:a,dropPoint:l})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(e.filter(o=>o.isDragging()).every(o=>-1===t.indexOf(o))?this._reset():this._cacheItems()),this}withDirection(t){return this._direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._orientation=t,this}withScrollableParents(t){const e=_(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,n,o){if(this.sortingDisabled||!this._clientRect||!ge(this._clientRect,.05,e,n))return;const r=this._itemPositions,a=this._getItemIndexFromPointerPosition(t,e,n,o);if(-1===a&&r.length>0)return;const l="horizontal"===this._orientation,c=r.findIndex(m=>m.drag===t),d=r[a],f=d.clientRect,b=c>a?1:-1,z=this._getItemOffsetPx(r[c].clientRect,f,b),T=this._getSiblingOffsetPx(c,r,b),Ie=r.slice();(function li(s,t,e){const n=x(t,s.length-1),o=x(e,s.length-1);if(n===o)return;const r=s[n],a=o<n?-1:1;for(let l=n;l!==o;l+=a)s[l]=s[l+a];s[o]=r})(r,c,a),this.sorted.next({previousIndex:c,currentIndex:a,container:this,item:t}),r.forEach((m,_i)=>{if(Ie[_i]===m)return;const Me=m.drag===t,J=Me?z:T,Re=Me?t.getPlaceholderElement():m.drag.getRootElement();m.offset+=J,l?(Re.style.transform=U(`translate3d(${Math.round(m.offset)}px, 0, 0)`,m.initialTransform),R(m.clientRect,0,J)):(Re.style.transform=U(`translate3d(0, ${Math.round(m.offset)}px, 0)`,m.initialTransform),R(m.clientRect,J,0))}),this._previousSwap.overlaps=W(f,e,n),this._previousSwap.drag=d.drag,this._previousSwap.delta=l?o.x:o.y}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let n,o=0,r=0;if(this._parentPositions.positions.forEach((a,l)=>{l===this._document||!a.clientRect||n||ge(a.clientRect,.05,t,e)&&([o,r]=function di(s,t,e,n){const o=we(t,n),r=Ae(t,e);let a=0,l=0;if(o){const c=s.scrollTop;1===o?c>0&&(a=1):s.scrollHeight-c>s.clientHeight&&(a=2)}if(r){const c=s.scrollLeft;1===r?c>0&&(l=1):s.scrollWidth-c>s.clientWidth&&(l=2)}return[a,l]}(l,a.clientRect,t,e),(o||r)&&(n=l))}),!o&&!r){const{width:a,height:l}=this._viewportRuler.getViewportSize(),c={width:a,height:l,top:0,right:a,bottom:l,left:0};o=we(c,e),r=Ae(c,t),n=window}n&&(o!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=r,this._scrollNode=n,(o||r)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=_(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=_(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_cacheItemPositions(){const t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const n=e.getVisibleElement();return{drag:e,offset:0,initialTransform:n.style.transform||"",clientRect:K(n)}}).sort((e,n)=>t?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top)}_reset(){this._isDragging=!1;const t=_(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>{var n;const o=e.getRootElement();if(o){const r=null===(n=this._itemPositions.find(a=>a.drag===e))||void 0===n?void 0:n.initialTransform;o.style.transform=r||""}}),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(t,e,n){const o="horizontal"===this._orientation,r=e[t].clientRect,a=e[t+-1*n];let l=r[o?"width":"height"]*n;if(a){const c=o?"left":"top",d=o?"right":"bottom";-1===n?l-=a.clientRect[c]-r[d]:l+=r[c]-a.clientRect[d]}return l}_getItemOffsetPx(t,e,n){const o="horizontal"===this._orientation;let r=o?e.left-t.left:e.top-t.top;return-1===n&&(r+=o?e.width-t.width:e.height-t.height),r}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,o="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){const a=n[n.length-1].clientRect;return o?t>=a.right:e>=a.bottom}{const a=n[0].clientRect;return o?t<=a.left:e<=a.top}}_getItemIndexFromPointerPosition(t,e,n,o){const r="horizontal"===this._orientation,a=this._itemPositions.findIndex(({drag:l,clientRect:c})=>{if(l===t)return!1;if(o){const d=r?o.x:o.y;if(l===this._previousSwap.drag&&this._previousSwap.overlaps&&d===this._previousSwap.delta)return!1}return r?e>=Math.floor(c.left)&&e<Math.floor(c.right):n>=Math.floor(c.top)&&n<Math.floor(c.bottom)});return-1!==a&&this.sortPredicate(a,t,this)?a:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(t,e){return null!=this._clientRect&&W(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,n){return this._siblings.find(o=>o._canReceive(t,e,n))}_canReceive(t,e,n){if(!this._clientRect||!W(this._clientRect,e,n)||!this.enterPredicate(t,this))return!1;const o=this._getShadowRoot().elementFromPoint(e,n);if(!o)return!1;const r=_(this.element);return o===r||r.contains(o)}_startReceiving(t,e){const n=this._activeSiblings;!n.has(t)&&e.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(n.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&(this._itemPositions.forEach(({clientRect:n})=>{R(n,e.top,e.left)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=re(_(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._activeDraggables.filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function we(s,t){const{top:e,bottom:n,height:o}=s,r=.05*o;return t>=e-r&&t<=e+r?1:t>=n-r&&t<=n+r?2:0}function Ae(s,t){const{left:e,right:n,width:o}=s,r=.05*o;return t>=e-r&&t<=e+r?1:t>=n-r&&t<=n+r?2:0}const B=I({passive:!1,capture:!0});let hi=(()=>{class s{constructor(e,n){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new p.xQ,this.pointerUp=new p.xQ,this.scroll=new p.xQ,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=n}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,B)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,B)}startDragging(e,n){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const o=n.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:r=>this.pointerUp.next(r),options:!0}).set("scroll",{handler:r=>this.scroll.next(r),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:B}),o||this._globalListeners.set("mousemove",{handler:r=>this.pointerMove.next(r),options:B}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((r,a)=>{this._document.addEventListener(a,r.handler,r.options)})})}}stopDragging(e){const n=this._activeDragInstances.indexOf(e);n>-1&&(this._activeDragInstances.splice(n,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const n=[this.scroll];return e&&e!==this._document&&n.push(new Jt.y(o=>this._ngZone.runOutsideAngular(()=>{const a=l=>{this._activeDragInstances.length&&o.next(l)};return e.addEventListener("scroll",a,!0),()=>{e.removeEventListener("scroll",a,!0)}}))),(0,Yt.T)(...n)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,n)=>{this._document.removeEventListener(n,e.handler,e.options)}),this._globalListeners.clear()}}return s.\u0275fac=function(e){return new(e||s)(i.LFG(i.R0b),i.LFG(y.K0))},s.\u0275prov=i.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const ui={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let gi=(()=>{class s{constructor(e,n,o,r){this._document=e,this._ngZone=n,this._viewportRuler=o,this._dragDropRegistry=r}createDrag(e,n=ui){return new ai(e,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new ci(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return s.\u0275fac=function(e){return new(e||s)(i.LFG(y.K0),i.LFG(i.R0b),i.LFG(ii),i.LFG(hi))},s.\u0275prov=i.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),pi=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({providers:[gi],imports:[ni]}),s})(),fi=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[[y.ez,wt,At.m,It.n,F.Ob,pi,se.zk.forRoot()]]}),s})()}}]);